var Yn=Object.defineProperty;var qn=(t,e,n)=>e in t?Yn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yt=(t,e,n)=>qn(t,typeof e!="symbol"?e+"":e,n);import{s as Bt,n as gt,r as $n,i as ye,o as pn,d as Un,x as Kn,e as mn,y as Gn}from"../chunks/C0I3Lh4A.js";import{S as Zt,i as Yt,d as V,a as rt,o as Be,x as Mt,w as T,c as P,e as $,h as O,y as Qn,s as xt,b as E,f as et,g as G,t as nt,j as Q,z as Kt,A as vt,B as Wn,C as Jn,D as jn,q as te,k as At,l as zt,u as ee,v as ne,r as ie,n as ti,E as ei,m as ni}from"../chunks/BiknXCUn.js";import{b as ii}from"../chunks/B_3lYi8U.js";function Ze(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}var ri={value:()=>{}};function qt(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new re(n)}function re(t){this._=t}function oi(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}re.prototype=qt.prototype={constructor:re,on:function(t,e){var n=this._,i=oi(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=si(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Ye(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ye(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new re(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function si(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ye(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=ri,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var ke="http://www.w3.org/1999/xhtml";const qe={svg:"http://www.w3.org/2000/svg",xhtml:ke,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pe(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),qe.hasOwnProperty(e)?{space:qe[e],local:t}:t}function ai(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ke&&e.documentElement.namespaceURI===ke?e.createElement(t):e.createElementNS(n,t)}}function ui(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function vn(t){var e=pe(t);return(e.local?ui:ai)(e)}function li(){}function Ie(t){return t==null?li:function(){return this.querySelector(t)}}function ci(t){typeof t!="function"&&(t=Ie(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=t.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new J(i,this._parents)}function fi(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function hi(){return[]}function _n(t){return t==null?hi:function(){return this.querySelectorAll(t)}}function di(t){return function(){return fi(t.apply(this,arguments))}}function gi(t){typeof t=="function"?t=di(t):t=_n(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(i.push(t.call(l,l.__data__,u,s)),r.push(l));return new J(i,r)}function yn(t){return function(){return this.matches(t)}}function wn(t){return function(e){return e.matches(t)}}var pi=Array.prototype.find;function mi(t){return function(){return pi.call(this.children,t)}}function vi(){return this.firstElementChild}function _i(t){return this.select(t==null?vi:mi(typeof t=="function"?t:wn(t)))}var yi=Array.prototype.filter;function wi(){return Array.from(this.children)}function xi(t){return function(){return yi.call(this.children,t)}}function bi(t){return this.selectAll(t==null?wi:xi(typeof t=="function"?t:wn(t)))}function Ni(t){typeof t!="function"&&(t=yn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new J(i,this._parents)}function xn(t){return new Array(t.length)}function ki(){return new J(this._enter||this._groups.map(xn),this._parents)}function le(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}le.prototype={constructor:le,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Mi(t){return function(){return t}}function Ai(t,e,n,i,r,o){for(var s=0,a,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new le(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function zi(t,e,n,i,r,o,s){var a,l,u=new Map,c=e.length,v=o.length,h=new Array(c),g;for(a=0;a<c;++a)(l=e[a])&&(h[a]=g=s.call(l,l.__data__,a,e)+"",u.has(g)?r[a]=l:u.set(g,l));for(a=0;a<v;++a)g=s.call(t,o[a],a,o)+"",(l=u.get(g))?(i[a]=l,l.__data__=o[a],u.delete(g)):n[a]=new le(t,o[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(h[a])===l&&(r[a]=l)}function Ei(t){return t.__data__}function Ti(t,e){if(!arguments.length)return Array.from(this,Ei);var n=e?zi:Ai,i=this._parents,r=this._groups;typeof t!="function"&&(t=Mi(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=i[u],v=r[u],h=v.length,g=Ci(t.call(c,c&&c.__data__,u,i)),_=g.length,f=a[u]=new Array(_),p=s[u]=new Array(_),d=l[u]=new Array(h);n(c,v,f,p,d,g,e);for(var x=0,b=0,m,k;x<_;++x)if(m=f[x]){for(x>=b&&(b=x+1);!(k=p[b])&&++b<_;);m._next=k||null}}return s=new J(s,i),s._enter=a,s._exit=l,s}function Ci(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Si(){return new J(this._exit||this._groups.map(xn),this._parents)}function Ii(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Di(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=i[l],v=u.length,h=a[l]=new Array(v),g,_=0;_<v;++_)(g=u[_]||c[_])&&(h[_]=g);for(;l<r;++l)a[l]=n[l];return new J(a,this._parents)}function Ri(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Vi(t){t||(t=Hi);function e(v,h){return v&&h?t(v.__data__,h.__data__):!v-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,l=r[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(e)}return new J(r,this._parents).order()}function Hi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Li(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Pi(){return Array.from(this)}function Oi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function Xi(){let t=0;for(const e of this)++t;return t}function Fi(){return!this.node()}function Bi(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function Zi(t){return function(){this.removeAttribute(t)}}function Yi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qi(t,e){return function(){this.setAttribute(t,e)}}function $i(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ui(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ki(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Gi(t,e){var n=pe(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Yi:Zi:typeof e=="function"?n.local?Ki:Ui:n.local?$i:qi)(n,e))}function bn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qi(t){return function(){this.style.removeProperty(t)}}function Wi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ji(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function ji(t,e,n){return arguments.length>1?this.each((e==null?Qi:typeof e=="function"?Ji:Wi)(t,e,n??"")):Ct(this.node(),t)}function Ct(t,e){return t.style.getPropertyValue(e)||bn(t).getComputedStyle(t,null).getPropertyValue(e)}function tr(t){return function(){delete this[t]}}function er(t,e){return function(){this[t]=e}}function nr(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ir(t,e){return arguments.length>1?this.each((e==null?tr:typeof e=="function"?nr:er)(t,e)):this.node()[t]}function Nn(t){return t.trim().split(/^|\s+/)}function De(t){return t.classList||new kn(t)}function kn(t){this._node=t,this._names=Nn(t.getAttribute("class")||"")}kn.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Mn(t,e){for(var n=De(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function An(t,e){for(var n=De(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function rr(t){return function(){Mn(this,t)}}function or(t){return function(){An(this,t)}}function sr(t,e){return function(){(e.apply(this,arguments)?Mn:An)(this,t)}}function ar(t,e){var n=Nn(t+"");if(arguments.length<2){for(var i=De(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?sr:e?rr:or)(n,e))}function ur(){this.textContent=""}function lr(t){return function(){this.textContent=t}}function cr(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function fr(t){return arguments.length?this.each(t==null?ur:(typeof t=="function"?cr:lr)(t)):this.node().textContent}function hr(){this.innerHTML=""}function dr(t){return function(){this.innerHTML=t}}function gr(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function pr(t){return arguments.length?this.each(t==null?hr:(typeof t=="function"?gr:dr)(t)):this.node().innerHTML}function mr(){this.nextSibling&&this.parentNode.appendChild(this)}function vr(){return this.each(mr)}function _r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yr(){return this.each(_r)}function wr(t){var e=typeof t=="function"?t:vn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xr(){return null}function br(t,e){var n=typeof t=="function"?t:vn(t),i=e==null?xr:typeof e=="function"?e:Ie(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Nr(){var t=this.parentNode;t&&t.removeChild(this)}function kr(){return this.each(Nr)}function Mr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ar(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zr(t){return this.select(t?Ar:Mr)}function Er(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Tr(t){return function(e){t.call(this,e,this.__data__)}}function Cr(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Sr(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Ir(t,e,n){return function(){var i=this.__on,r,o=Tr(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Dr(t,e,n){var i=Cr(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<o;++r)if((s=i[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?Ir:Sr,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function zn(t,e,n){var i=bn(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Rr(t,e){return function(){return zn(this,t,e)}}function Vr(t,e){return function(){return zn(this,t,e.apply(this,arguments))}}function Hr(t,e){return this.each((typeof e=="function"?Vr:Rr)(t,e))}function*Lr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var En=[null];function J(t,e){this._groups=t,this._parents=e}function $t(){return new J([[document.documentElement]],En)}function Pr(){return this}J.prototype=$t.prototype={constructor:J,select:ci,selectAll:gi,selectChild:_i,selectChildren:bi,filter:Ni,data:Ti,enter:ki,exit:Si,join:Ii,merge:Di,selection:Pr,order:Ri,sort:Vi,call:Li,nodes:Pi,node:Oi,size:Xi,empty:Fi,each:Bi,attr:Gi,style:ji,property:ir,classed:ar,text:fr,html:pr,raise:vr,lower:yr,append:wr,insert:br,remove:kr,clone:zr,datum:Er,on:Dr,dispatch:Hr,[Symbol.iterator]:Lr};function Y(t){return typeof t=="string"?new J([[document.querySelector(t)]],[document.documentElement]):new J([[t]],En)}function Or(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ht(t,e){if(t=Or(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Xr={passive:!1},Lt={capture:!0,passive:!1};function we(t){t.stopImmediatePropagation()}function Et(t){t.preventDefault(),t.stopImmediatePropagation()}function Tn(t){var e=t.document.documentElement,n=Y(t).on("dragstart.drag",Et,Lt);"onselectstart"in e?n.on("selectstart.drag",Et,Lt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Cn(t,e){var n=t.document.documentElement,i=Y(t).on("dragstart.drag",null);e&&(i.on("click.drag",Et,Lt),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gt=t=>()=>t;function Me(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Me.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Fr(t){return!t.ctrlKey&&!t.button}function Br(){return this.parentNode}function Zr(t,e){return e??{x:t.x,y:t.y}}function Yr(){return navigator.maxTouchPoints||"ontouchstart"in this}function qr(){var t=Fr,e=Br,n=Zr,i=Yr,r={},o=qt("start","drag","end"),s=0,a,l,u,c,v=0;function h(m){m.on("mousedown.drag",g).filter(i).on("touchstart.drag",p).on("touchmove.drag",d,Xr).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(m,k){if(!(c||!t.call(this,m,k))){var A=b(this,e.call(this,m,k),m,k,"mouse");A&&(Y(m.view).on("mousemove.drag",_,Lt).on("mouseup.drag",f,Lt),Tn(m.view),we(m),u=!1,a=m.clientX,l=m.clientY,A("start",m))}}function _(m){if(Et(m),!u){var k=m.clientX-a,A=m.clientY-l;u=k*k+A*A>v}r.mouse("drag",m)}function f(m){Y(m.view).on("mousemove.drag mouseup.drag",null),Cn(m.view,u),Et(m),r.mouse("end",m)}function p(m,k){if(t.call(this,m,k)){var A=m.changedTouches,z=e.call(this,m,k),S=A.length,H,R;for(H=0;H<S;++H)(R=b(this,z,m,k,A[H].identifier,A[H]))&&(we(m),R("start",m,A[H]))}}function d(m){var k=m.changedTouches,A=k.length,z,S;for(z=0;z<A;++z)(S=r[k[z].identifier])&&(Et(m),S("drag",m,k[z]))}function x(m){var k=m.changedTouches,A=k.length,z,S;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),z=0;z<A;++z)(S=r[k[z].identifier])&&(we(m),S("end",m,k[z]))}function b(m,k,A,z,S,H){var R=o.copy(),L=ht(H||A,k),F,B,y;if((y=n.call(m,new Me("beforestart",{sourceEvent:A,target:h,identifier:S,active:s,x:L[0],y:L[1],dx:0,dy:0,dispatch:R}),z))!=null)return F=y.x-L[0]||0,B=y.y-L[1]||0,function N(w,M,C){var I=L,D;switch(w){case"start":r[S]=N,D=s++;break;case"end":delete r[S],--s;case"drag":L=ht(C||M,k),D=s;break}R.call(w,m,new Me(w,{sourceEvent:M,subject:y,target:h,identifier:S,active:D,x:L[0]+F,y:L[1]+B,dx:L[0]-I[0],dy:L[1]-I[1],dispatch:R}),z)}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Gt(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:Gt(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Gt(m),h):n},h.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Gt(!!m),h):i},h.on=function(){var m=o.on.apply(o,arguments);return m===o?h:m},h.clickDistance=function(m){return arguments.length?(v=(m=+m)*m,h):Math.sqrt(v)},h}function Re(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Sn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ut(){}var Pt=.7,ce=1/Pt,Tt="\\s*([+-]?\\d+)\\s*",Ot="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$r=/^#([0-9a-f]{3,8})$/,Ur=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Kr=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),Gr=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Ot}\\)$`),Qr=new RegExp(`^rgba\\(${at},${at},${at},${Ot}\\)$`),Wr=new RegExp(`^hsl\\(${Ot},${at},${at}\\)$`),Jr=new RegExp(`^hsla\\(${Ot},${at},${at},${Ot}\\)$`),$e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Re(Ut,Xt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ue,formatHex:Ue,formatHex8:jr,formatHsl:to,formatRgb:Ke,toString:Ke});function Ue(){return this.rgb().formatHex()}function jr(){return this.rgb().formatHex8()}function to(){return In(this).formatHsl()}function Ke(){return this.rgb().formatRgb()}function Xt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=$r.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ge(e):n===3?new W(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Qt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Qt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ur.exec(t))?new W(e[1],e[2],e[3],1):(e=Kr.exec(t))?new W(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Gr.exec(t))?Qt(e[1],e[2],e[3],e[4]):(e=Qr.exec(t))?Qt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Wr.exec(t))?Je(e[1],e[2]/100,e[3]/100,1):(e=Jr.exec(t))?Je(e[1],e[2]/100,e[3]/100,e[4]):$e.hasOwnProperty(t)?Ge($e[t]):t==="transparent"?new W(NaN,NaN,NaN,0):null}function Ge(t){return new W(t>>16&255,t>>8&255,t&255,1)}function Qt(t,e,n,i){return i<=0&&(t=e=n=NaN),new W(t,e,n,i)}function eo(t){return t instanceof Ut||(t=Xt(t)),t?(t=t.rgb(),new W(t.r,t.g,t.b,t.opacity)):new W}function Ae(t,e,n,i){return arguments.length===1?eo(t):new W(t,e,n,i??1)}function W(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Re(W,Ae,Sn(Ut,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Pt:Math.pow(Pt,t),new W(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new W(bt(this.r),bt(this.g),bt(this.b),fe(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qe,formatHex:Qe,formatHex8:no,formatRgb:We,toString:We}));function Qe(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}`}function no(){return`#${wt(this.r)}${wt(this.g)}${wt(this.b)}${wt((isNaN(this.opacity)?1:this.opacity)*255)}`}function We(){const t=fe(this.opacity);return`${t===1?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${t===1?")":`, ${t})`}`}function fe(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wt(t){return t=bt(t),(t<16?"0":"")+t.toString(16)}function Je(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new it(t,e,n,i)}function In(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);if(t instanceof Ut||(t=Xt(t)),!t)return new it;if(t instanceof it)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,l=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new it(s,a,l,t.opacity)}function io(t,e,n,i){return arguments.length===1?In(t):new it(t,e,n,i??1)}function it(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Re(it,io,Sn(Ut,{brighter(t){return t=t==null?ce:Math.pow(ce,t),new it(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Pt:Math.pow(Pt,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new W(xe(t>=240?t-240:t+120,r,i),xe(t,r,i),xe(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new it(je(this.h),Wt(this.s),Wt(this.l),fe(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fe(this.opacity);return`${t===1?"hsl(":"hsla("}${je(this.h)}, ${Wt(this.s)*100}%, ${Wt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function je(t){return t=(t||0)%360,t<0?t+360:t}function Wt(t){return Math.max(0,Math.min(1,t||0))}function xe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Dn=t=>()=>t;function ro(t,e){return function(n){return t+n*e}}function oo(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function so(t){return(t=+t)==1?Rn:function(e,n){return n-e?oo(e,n,t):Dn(isNaN(e)?n:e)}}function Rn(t,e){var n=e-t;return n?ro(t,n):Dn(isNaN(t)?e:t)}const tn=function t(e){var n=so(e);function i(r,o){var s=n((r=Ae(r)).r,(o=Ae(o)).r),a=n(r.g,o.g),l=n(r.b,o.b),u=Rn(r.opacity,o.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return i.gamma=t,i}(1);function mt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var ze=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,be=new RegExp(ze.source,"g");function ao(t){return function(){return t}}function uo(t){return function(e){return t(e)+""}}function lo(t,e){var n=ze.lastIndex=be.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(i=ze.exec(t))&&(r=be.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:mt(i,r)})),n=be.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?uo(l[0].x):ao(e):(e=l.length,function(u){for(var c=0,v;c<e;++c)a[(v=l[c]).i]=v.x(u);return a.join("")})}var en=180/Math.PI,Ee={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vn(t,e,n,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*en,skewX:Math.atan(l)*en,scaleX:s,scaleY:a}}var Jt;function co(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ee:Vn(e.a,e.b,e.c,e.d,e.e,e.f)}function fo(t){return t==null||(Jt||(Jt=document.createElementNS("http://www.w3.org/2000/svg","g")),Jt.setAttribute("transform",t),!(t=Jt.transform.baseVal.consolidate()))?Ee:(t=t.matrix,Vn(t.a,t.b,t.c,t.d,t.e,t.f))}function Hn(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,c,v,h,g,_){if(u!==v||c!==h){var f=g.push("translate(",null,e,null,n);_.push({i:f-4,x:mt(u,v)},{i:f-2,x:mt(c,h)})}else(v||h)&&g.push("translate("+v+e+h+n)}function s(u,c,v,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:v.push(r(v)+"rotate(",null,i)-2,x:mt(u,c)})):c&&v.push(r(v)+"rotate("+c+i)}function a(u,c,v,h){u!==c?h.push({i:v.push(r(v)+"skewX(",null,i)-2,x:mt(u,c)}):c&&v.push(r(v)+"skewX("+c+i)}function l(u,c,v,h,g,_){if(u!==v||c!==h){var f=g.push(r(g)+"scale(",null,",",null,")");_.push({i:f-4,x:mt(u,v)},{i:f-2,x:mt(c,h)})}else(v!==1||h!==1)&&g.push(r(g)+"scale("+v+","+h+")")}return function(u,c){var v=[],h=[];return u=t(u),c=t(c),o(u.translateX,u.translateY,c.translateX,c.translateY,v,h),s(u.rotate,c.rotate,v,h),a(u.skewX,c.skewX,v,h),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,v,h),u=c=null,function(g){for(var _=-1,f=h.length,p;++_<f;)v[(p=h[_]).i]=p.x(g);return v.join("")}}}var ho=Hn(co,"px, ","px)","deg)"),go=Hn(fo,", ",")",")"),po=1e-12;function nn(t){return((t=Math.exp(t))+1/t)/2}function mo(t){return((t=Math.exp(t))-1/t)/2}function vo(t){return((t=Math.exp(2*t))-1)/(t+1)}const _o=function t(e,n,i){function r(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],v=s[1],h=s[2],g=c-a,_=v-l,f=g*g+_*_,p,d;if(f<po)d=Math.log(h/u)/e,p=function(z){return[a+z*g,l+z*_,u*Math.exp(e*z*d)]};else{var x=Math.sqrt(f),b=(h*h-u*u+i*f)/(2*u*n*x),m=(h*h-u*u-i*f)/(2*h*n*x),k=Math.log(Math.sqrt(b*b+1)-b),A=Math.log(Math.sqrt(m*m+1)-m);d=(A-k)/e,p=function(z){var S=z*d,H=nn(k),R=u/(n*x)*(H*vo(e*S+k)-mo(k));return[a+R*g,l+R*_,u*H/nn(e*S+k)]}}return p.duration=d*1e3*e/Math.SQRT2,p}return r.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return t(s,a,l)},r}(Math.SQRT2,2,4);var St=0,Rt=0,It=0,Ln=1e3,he,Vt,de=0,kt=0,me=0,Ft=typeof performance=="object"&&performance.now?performance:Date,Pn=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ve(){return kt||(Pn(yo),kt=Ft.now()+me)}function yo(){kt=0}function ge(){this._call=this._time=this._next=null}ge.prototype=He.prototype={constructor:ge,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ve():+n)+(e==null?0:+e),!this._next&&Vt!==this&&(Vt?Vt._next=this:he=this,Vt=this),this._call=t,this._time=n,Te()},stop:function(){this._call&&(this._call=null,this._time=1/0,Te())}};function He(t,e,n){var i=new ge;return i.restart(t,e,n),i}function wo(){Ve(),++St;for(var t=he,e;t;)(e=kt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--St}function rn(){kt=(de=Ft.now())+me,St=Rt=0;try{wo()}finally{St=0,bo(),kt=0}}function xo(){var t=Ft.now(),e=t-de;e>Ln&&(me-=e,de=t)}function bo(){for(var t,e=he,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:he=n);Vt=t,Te(i)}function Te(t){if(!St){Rt&&(Rt=clearTimeout(Rt));var e=t-kt;e>24?(t<1/0&&(Rt=setTimeout(rn,t-Ft.now()-me)),It&&(It=clearInterval(It))):(It||(de=Ft.now(),It=setInterval(xo,Ln)),St=1,Pn(rn))}}function on(t,e,n){var i=new ge;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var No=qt("start","end","cancel","interrupt"),ko=[],On=0,sn=1,Ce=2,oe=3,an=4,Se=5,se=6;function ve(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Mo(t,n,{name:e,index:i,group:r,on:No,tween:ko,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:On})}function Le(t,e){var n=ot(t,e);if(n.state>On)throw new Error("too late; already scheduled");return n}function ut(t,e){var n=ot(t,e);if(n.state>oe)throw new Error("too late; already running");return n}function ot(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Mo(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=He(o,0,n.time);function o(u){n.state=sn,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,v,h,g;if(n.state!==sn)return l();for(c in i)if(g=i[c],g.name===n.name){if(g.state===oe)return on(s);g.state===an?(g.state=se,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete i[c]):+c<e&&(g.state=se,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete i[c])}if(on(function(){n.state===oe&&(n.state=an,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Ce,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ce){for(n.state=oe,r=new Array(h=n.tween.length),c=0,v=-1;c<h;++c)(g=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++v]=g);r.length=v+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Se,1),v=-1,h=r.length;++v<h;)r[v].call(t,c);n.state===Se&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=se,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function ae(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Ce&&i.state<Se,i.state=se,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Ao(t){return this.each(function(){ae(this,t)})}function zo(t,e){var n,i;return function(){var r=ut(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Eo(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=ut(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=a;break}l===u&&r.push(a)}o.tween=r}}function To(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=ot(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?zo:Eo)(n,t,e))}function Pe(t,e,n){var i=t._id;return t.each(function(){var r=ut(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return ot(r,i).value[e]}}function Xn(t,e){var n;return(typeof e=="number"?mt:e instanceof Xt?tn:(n=Xt(e))?(e=n,tn):lo)(t,e)}function Co(t){return function(){this.removeAttribute(t)}}function So(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Io(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function Do(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function Ro(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function Vo(t,e,n){var i,r,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a)))}}function Ho(t,e){var n=pe(t),i=n==="transform"?go:Xn;return this.attrTween(t,typeof e=="function"?(n.local?Vo:Ro)(n,i,Pe(this,"attr."+t,e)):e==null?(n.local?So:Co)(n):(n.local?Do:Io)(n,i,e))}function Lo(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Po(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Oo(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Po(t,o)),n}return r._value=e,r}function Xo(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Lo(t,o)),n}return r._value=e,r}function Fo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=pe(t);return this.tween(n,(i.local?Oo:Xo)(i,e))}function Bo(t,e){return function(){Le(this,t).delay=+e.apply(this,arguments)}}function Zo(t,e){return e=+e,function(){Le(this,t).delay=e}}function Yo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Bo:Zo)(e,t)):ot(this.node(),e).delay}function qo(t,e){return function(){ut(this,t).duration=+e.apply(this,arguments)}}function $o(t,e){return e=+e,function(){ut(this,t).duration=e}}function Uo(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qo:$o)(e,t)):ot(this.node(),e).duration}function Ko(t,e){if(typeof e!="function")throw new Error;return function(){ut(this,t).ease=e}}function Go(t){var e=this._id;return arguments.length?this.each(Ko(e,t)):ot(this.node(),e).ease}function Qo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ut(this,t).ease=n}}function Wo(t){if(typeof t!="function")throw new Error;return this.each(Qo(this._id,t))}function Jo(t){typeof t!="function"&&(t=yn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],l,u=0;u<s;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&a.push(l);return new pt(i,this._parents,this._name,this._id)}function jo(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=e[a],u=n[a],c=l.length,v=s[a]=new Array(c),h,g=0;g<c;++g)(h=l[g]||u[g])&&(v[g]=h);for(;a<i;++a)s[a]=e[a];return new pt(s,this._parents,this._name,this._id)}function ts(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function es(t,e,n){var i,r,o=ts(e)?Le:ut;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function ns(t,e){var n=this._id;return arguments.length<2?ot(this.node(),n).on.on(t):this.each(es(n,t,e))}function is(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rs(){return this.on("end.remove",is(this._id))}function os(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ie(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,u=o[s]=new Array(l),c,v,h=0;h<l;++h)(c=a[h])&&(v=t.call(c,c.__data__,h,a))&&("__data__"in c&&(v.__data__=c.__data__),u[h]=v,ve(u[h],e,n,h,u,ot(c,n)));return new pt(o,this._parents,e,n)}function ss(t){var e=this._name,n=this._id;typeof t!="function"&&(t=_n(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],u=l.length,c,v=0;v<u;++v)if(c=l[v]){for(var h=t.call(c,c.__data__,v,l),g,_=ot(c,n),f=0,p=h.length;f<p;++f)(g=h[f])&&ve(g,e,n,f,h,_);o.push(h),s.push(c)}return new pt(o,s,e,n)}var as=$t.prototype.constructor;function us(){return new as(this._groups,this._parents)}function ls(t,e){var n,i,r;return function(){var o=Ct(this,t),s=(this.style.removeProperty(t),Ct(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function Fn(t){return function(){this.style.removeProperty(t)}}function cs(t,e,n){var i,r=n+"",o;return function(){var s=Ct(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function fs(t,e,n){var i,r,o;return function(){var s=Ct(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Ct(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=e(i=s,a))}}function hs(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var l=ut(this,t),u=l.on,c=l.value[o]==null?a||(a=Fn(e)):void 0;(u!==n||r!==c)&&(i=(n=u).copy()).on(s,r=c),l.on=i}}function ds(t,e,n){var i=(t+="")=="transform"?ho:Xn;return e==null?this.styleTween(t,ls(t,i)).on("end.style."+t,Fn(t)):typeof e=="function"?this.styleTween(t,fs(t,i,Pe(this,"style."+t,e))).each(hs(this._id,t)):this.styleTween(t,cs(t,i,e),n).on("end.style."+t,null)}function gs(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function ps(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&gs(t,s,n)),i}return o._value=e,o}function ms(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,ps(t,e,n??""))}function vs(t){return function(){this.textContent=t}}function _s(t){return function(){var e=t(this);this.textContent=e??""}}function ys(t){return this.tween("text",typeof t=="function"?_s(Pe(this,"text",t)):vs(t==null?"":t+""))}function ws(t){return function(e){this.textContent=t.call(this,e)}}function xs(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ws(r)),e}return i._value=t,i}function bs(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,xs(t))}function Ns(){for(var t=this._name,e=this._id,n=Bn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=ot(l,e);ve(l,t,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pt(i,this._parents,t,n)}function ks(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};n.each(function(){var u=ut(this,i),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),r===0&&o()})}var Ms=0;function pt(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Bn(){return++Ms}var ft=$t.prototype;pt.prototype={constructor:pt,select:os,selectAll:ss,selectChild:ft.selectChild,selectChildren:ft.selectChildren,filter:Jo,merge:jo,selection:us,transition:Ns,call:ft.call,nodes:ft.nodes,node:ft.node,size:ft.size,empty:ft.empty,each:ft.each,on:ns,attr:Ho,attrTween:Fo,style:ds,styleTween:ms,text:ys,textTween:bs,remove:rs,tween:To,delay:Yo,duration:Uo,ease:Go,easeVarying:Wo,end:ks,[Symbol.iterator]:ft[Symbol.iterator]};function As(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zs={time:null,delay:0,duration:250,ease:As};function Es(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Ts(t){var e,n;t instanceof pt?(e=t._id,t=t._name):(e=Bn(),(n=zs).time=Ve(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&ve(l,t,e,u,s,n||Es(l,e));return new pt(i,this._parents,t,e)}$t.prototype.interrupt=Ao;$t.prototype.transition=Ts;function Cs(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var o,s=n.length,a,l=0,u=0;for(o=0;o<s;++o)a=n[o],l+=a.x,u+=a.y;for(l=(l/s-t)*i,u=(u/s-e)*i,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=u}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(e=+o,r):e},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Ss(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Zn(this.cover(e,n),e,n,t)}function Zn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o=t._root,s={data:i},a=t._x0,l=t._y0,u=t._x1,c=t._y1,v,h,g,_,f,p,d,x;if(!o)return t._root=s,t;for(;o.length;)if((f=e>=(v=(a+u)/2))?a=v:u=v,(p=n>=(h=(l+c)/2))?l=h:c=h,r=o,!(o=o[d=p<<1|f]))return r[d]=s,t;if(g=+t._x.call(null,o.data),_=+t._y.call(null,o.data),e===g&&n===_)return s.next=o,r?r[d]=s:t._root=s,t;do r=r?r[d]=new Array(4):t._root=new Array(4),(f=e>=(v=(a+u)/2))?a=v:u=v,(p=n>=(h=(l+c)/2))?l=h:c=h;while((d=p<<1|f)===(x=(_>=h)<<1|g>=v));return r[x]=o,r[d]=s,t}function Is(t){var e,n,i=t.length,r,o,s=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,v=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,a[n]=o,r<l&&(l=r),r>c&&(c=r),o<u&&(u=o),o>v&&(v=o));if(l>c||u>v)return this;for(this.cover(l,u).cover(c,v),n=0;n<i;++n)Zn(this,s[n],a[n],t[n]);return this}function Ds(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,l,u;n>t||t>=r||i>e||e>=o;)switch(u=(e<i)<<1|t<n,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function Rs(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Vs(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function U(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Hs(t,e,n){var i,r=this._x0,o=this._y0,s,a,l,u,c=this._x1,v=this._y1,h=[],g=this._root,_,f;for(g&&h.push(new U(g,r,o,c,v)),n==null?n=1/0:(r=t-n,o=e-n,c=t+n,v=e+n,n*=n);_=h.pop();)if(!(!(g=_.node)||(s=_.x0)>c||(a=_.y0)>v||(l=_.x1)<r||(u=_.y1)<o))if(g.length){var p=(s+l)/2,d=(a+u)/2;h.push(new U(g[3],p,d,l,u),new U(g[2],s,d,p,u),new U(g[1],p,a,l,d),new U(g[0],s,a,p,d)),(f=(e>=d)<<1|t>=p)&&(_=h[h.length-1],h[h.length-1]=h[h.length-1-f],h[h.length-1-f]=_)}else{var x=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),m=x*x+b*b;if(m<n){var k=Math.sqrt(n=m);r=t-k,o=e-k,c=t+k,v=e+k,i=g.data}}return i}function Ls(t){if(isNaN(c=+this._x.call(null,t))||isNaN(v=+this._y.call(null,t)))return this;var e,n=this._root,i,r,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,v,h,g,_,f,p,d;if(!n)return this;if(n.length)for(;;){if((_=c>=(h=(s+l)/2))?s=h:l=h,(f=v>=(g=(a+u)/2))?a=g:u=g,e=n,!(n=n[p=f<<1|_]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(i=e,d=p)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):e?(o?e[p]=o:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[d]=n:this._root=n),this):(this._root=o,this)}function Ps(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Os(){return this._root}function Xs(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function Fs(t){var e=[],n,i=this._root,r,o,s,a,l;for(i&&e.push(new U(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(o+a)/2,c=(s+l)/2;(r=i[3])&&e.push(new U(r,u,c,a,l)),(r=i[2])&&e.push(new U(r,o,c,u,l)),(r=i[1])&&e.push(new U(r,u,s,a,c)),(r=i[0])&&e.push(new U(r,o,s,u,c))}return this}function Bs(t){var e=[],n=[],i;for(this._root&&e.push(new U(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(s+l)/2,v=(a+u)/2;(o=r[0])&&e.push(new U(o,s,a,c,v)),(o=r[1])&&e.push(new U(o,c,a,l,v)),(o=r[2])&&e.push(new U(o,s,v,c,u)),(o=r[3])&&e.push(new U(o,c,v,l,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Zs(t){return t[0]}function Ys(t){return arguments.length?(this._x=t,this):this._x}function qs(t){return t[1]}function $s(t){return arguments.length?(this._y=t,this):this._y}function Oe(t,e,n){var i=new Xe(e??Zs,n??qs,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Xe(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function un(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var K=Oe.prototype=Xe.prototype;K.copy=function(){var t=new Xe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=un(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=un(i));return t};K.add=Ss;K.addAll=Is;K.cover=Ds;K.data=Rs;K.extent=Vs;K.find=Hs;K.remove=Ls;K.removeAll=Ps;K.root=Os;K.size=Xs;K.visit=Fs;K.visitAfter=Bs;K.x=Ys;K.y=$s;function Nt(t){return function(){return t}}function _t(t){return(t()-.5)*1e-6}function Us(t){return t.x+t.vx}function Ks(t){return t.y+t.vy}function Gs(t){var e,n,i,r=1,o=1;typeof t!="function"&&(t=Nt(t==null?1:+t));function s(){for(var u,c=e.length,v,h,g,_,f,p,d=0;d<o;++d)for(v=Oe(e,Us,Ks).visitAfter(a),u=0;u<c;++u)h=e[u],f=n[h.index],p=f*f,g=h.x+h.vx,_=h.y+h.vy,v.visit(x);function x(b,m,k,A,z){var S=b.data,H=b.r,R=f+H;if(S){if(S.index>h.index){var L=g-S.x-S.vx,F=_-S.y-S.vy,B=L*L+F*F;B<R*R&&(L===0&&(L=_t(i),B+=L*L),F===0&&(F=_t(i),B+=F*F),B=(R-(B=Math.sqrt(B)))/B*r,h.vx+=(L*=B)*(R=(H*=H)/(p+H)),h.vy+=(F*=B)*R,S.vx-=L*(R=1-R),S.vy-=F*R)}return}return m>g+R||A<g-R||k>_+R||z<_-R}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,v;for(n=new Array(c),u=0;u<c;++u)v=e[u],n[v.index]=+t(v,u,e)}}return s.initialize=function(u,c){e=u,i=c,l()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(r=+u,s):r},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:Nt(+u),l(),s):t},s}function Qs(t){return t.index}function ln(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Ws(t){var e=Qs,n=v,i,r=Nt(30),o,s,a,l,u,c=1;t==null&&(t=[]);function v(p){return 1/Math.min(a[p.source.index],a[p.target.index])}function h(p){for(var d=0,x=t.length;d<c;++d)for(var b=0,m,k,A,z,S,H,R;b<x;++b)m=t[b],k=m.source,A=m.target,z=A.x+A.vx-k.x-k.vx||_t(u),S=A.y+A.vy-k.y-k.vy||_t(u),H=Math.sqrt(z*z+S*S),H=(H-o[b])/H*p*i[b],z*=H,S*=H,A.vx-=z*(R=l[b]),A.vy-=S*R,k.vx+=z*(R=1-R),k.vy+=S*R}function g(){if(s){var p,d=s.length,x=t.length,b=new Map(s.map((k,A)=>[e(k,A,s),k])),m;for(p=0,a=new Array(d);p<x;++p)m=t[p],m.index=p,typeof m.source!="object"&&(m.source=ln(b,m.source)),typeof m.target!="object"&&(m.target=ln(b,m.target)),a[m.source.index]=(a[m.source.index]||0)+1,a[m.target.index]=(a[m.target.index]||0)+1;for(p=0,l=new Array(x);p<x;++p)m=t[p],l[p]=a[m.source.index]/(a[m.source.index]+a[m.target.index]);i=new Array(x),_(),o=new Array(x),f()}}function _(){if(s)for(var p=0,d=t.length;p<d;++p)i[p]=+n(t[p],p,t)}function f(){if(s)for(var p=0,d=t.length;p<d;++p)o[p]=+r(t[p],p,t)}return h.initialize=function(p,d){s=p,u=d,g()},h.links=function(p){return arguments.length?(t=p,g(),h):t},h.id=function(p){return arguments.length?(e=p,h):e},h.iterations=function(p){return arguments.length?(c=+p,h):c},h.strength=function(p){return arguments.length?(n=typeof p=="function"?p:Nt(+p),_(),h):n},h.distance=function(p){return arguments.length?(r=typeof p=="function"?p:Nt(+p),f(),h):r},h}const Js=1664525,js=1013904223,cn=4294967296;function ta(){let t=1;return()=>(t=(Js*t+js)%cn)/cn}function ea(t){return t.x}function na(t){return t.y}var ia=10,ra=Math.PI*(3-Math.sqrt(5));function oa(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,l=He(v),u=qt("tick","end"),c=ta();t==null&&(t=[]);function v(){h(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function h(f){var p,d=t.length,x;f===void 0&&(f=1);for(var b=0;b<f;++b)for(n+=(o-n)*r,a.forEach(function(m){m(n)}),p=0;p<d;++p)x=t[p],x.fx==null?x.x+=x.vx*=s:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=s:(x.y=x.fy,x.vy=0);return e}function g(){for(var f=0,p=t.length,d;f<p;++f){if(d=t[f],d.index=f,d.fx!=null&&(d.x=d.fx),d.fy!=null&&(d.y=d.fy),isNaN(d.x)||isNaN(d.y)){var x=ia*Math.sqrt(.5+f),b=f*ra;d.x=x*Math.cos(b),d.y=x*Math.sin(b)}(isNaN(d.vx)||isNaN(d.vy))&&(d.vx=d.vy=0)}}function _(f){return f.initialize&&f.initialize(t,c),f}return g(),e={tick:h,restart:function(){return l.restart(v),e},stop:function(){return l.stop(),e},nodes:function(f){return arguments.length?(t=f,g(),a.forEach(_),e):t},alpha:function(f){return arguments.length?(n=+f,e):n},alphaMin:function(f){return arguments.length?(i=+f,e):i},alphaDecay:function(f){return arguments.length?(r=+f,e):+r},alphaTarget:function(f){return arguments.length?(o=+f,e):o},velocityDecay:function(f){return arguments.length?(s=1-f,e):1-s},randomSource:function(f){return arguments.length?(c=f,a.forEach(_),e):c},force:function(f,p){return arguments.length>1?(p==null?a.delete(f):a.set(f,_(p)),e):a.get(f)},find:function(f,p,d){var x=0,b=t.length,m,k,A,z,S;for(d==null?d=1/0:d*=d,x=0;x<b;++x)z=t[x],m=f-z.x,k=p-z.y,A=m*m+k*k,A<d&&(S=z,d=A);return S},on:function(f,p){return arguments.length>1?(u.on(f,p),e):u.on(f)}}}function sa(){var t,e,n,i,r=Nt(-30),o,s=1,a=1/0,l=.81;function u(g){var _,f=t.length,p=Oe(t,ea,na).visitAfter(v);for(i=g,_=0;_<f;++_)e=t[_],p.visit(h)}function c(){if(t){var g,_=t.length,f;for(o=new Array(_),g=0;g<_;++g)f=t[g],o[f.index]=+r(f,g,t)}}function v(g){var _=0,f,p,d=0,x,b,m;if(g.length){for(x=b=m=0;m<4;++m)(f=g[m])&&(p=Math.abs(f.value))&&(_+=f.value,d+=p,x+=p*f.x,b+=p*f.y);g.x=x/d,g.y=b/d}else{f=g,f.x=f.data.x,f.y=f.data.y;do _+=o[f.data.index];while(f=f.next)}g.value=_}function h(g,_,f,p){if(!g.value)return!0;var d=g.x-e.x,x=g.y-e.y,b=p-_,m=d*d+x*x;if(b*b/l<m)return m<a&&(d===0&&(d=_t(n),m+=d*d),x===0&&(x=_t(n),m+=x*x),m<s&&(m=Math.sqrt(s*m)),e.vx+=d*g.value*i/m,e.vy+=x*g.value*i/m),!0;if(g.length||m>=a)return;(g.data!==e||g.next)&&(d===0&&(d=_t(n),m+=d*d),x===0&&(x=_t(n),m+=x*x),m<s&&(m=Math.sqrt(s*m)));do g.data!==e&&(b=o[g.data.index]*i/m,e.vx+=d*b,e.vy+=x*b);while(g=g.next)}return u.initialize=function(g,_){t=g,n=_,c()},u.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Nt(+g),c(),u):r},u.distanceMin=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.distanceMax=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}const jt=t=>()=>t;function aa(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function dt(t,e,n){this.k=t,this.x=e,this.y=n}dt.prototype={constructor:dt,scale:function(t){return t===1?this:new dt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new dt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ht=new dt(1,0,0);dt.prototype;function Ne(t){t.stopImmediatePropagation()}function Dt(t){t.preventDefault(),t.stopImmediatePropagation()}function ua(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function la(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function fn(){return this.__zoom||Ht}function ca(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function fa(){return navigator.maxTouchPoints||"ontouchstart"in this}function ha(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function ue(){var t=ua,e=la,n=ha,i=ca,r=fa,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=_o,u=qt("start","zoom","end"),c,v,h,g=500,_=150,f=0,p=10;function d(y){y.property("__zoom",fn).on("wheel.zoom",S,{passive:!1}).on("mousedown.zoom",H).on("dblclick.zoom",R).filter(r).on("touchstart.zoom",L).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(y,N,w,M){var C=y.selection?y.selection():y;C.property("__zoom",fn),y!==C?k(y,N,w,M):C.interrupt().each(function(){A(this,arguments).event(M).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},d.scaleBy=function(y,N,w,M){d.scaleTo(y,function(){var C=this.__zoom.k,I=typeof N=="function"?N.apply(this,arguments):N;return C*I},w,M)},d.scaleTo=function(y,N,w,M){d.transform(y,function(){var C=e.apply(this,arguments),I=this.__zoom,D=w==null?m(C):typeof w=="function"?w.apply(this,arguments):w,X=I.invert(D),Z=typeof N=="function"?N.apply(this,arguments):N;return n(b(x(I,Z),D,X),C,s)},w,M)},d.translateBy=function(y,N,w,M){d.transform(y,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof w=="function"?w.apply(this,arguments):w),e.apply(this,arguments),s)},null,M)},d.translateTo=function(y,N,w,M,C){d.transform(y,function(){var I=e.apply(this,arguments),D=this.__zoom,X=M==null?m(I):typeof M=="function"?M.apply(this,arguments):M;return n(Ht.translate(X[0],X[1]).scale(D.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof w=="function"?-w.apply(this,arguments):-w),I,s)},M,C)};function x(y,N){return N=Math.max(o[0],Math.min(o[1],N)),N===y.k?y:new dt(N,y.x,y.y)}function b(y,N,w){var M=N[0]-w[0]*y.k,C=N[1]-w[1]*y.k;return M===y.x&&C===y.y?y:new dt(y.k,M,C)}function m(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function k(y,N,w,M){y.on("start.zoom",function(){A(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){A(this,arguments).event(M).end()}).tween("zoom",function(){var C=this,I=arguments,D=A(C,I).event(M),X=e.apply(C,I),Z=w==null?m(X):typeof w=="function"?w.apply(C,I):w,st=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),q=C.__zoom,j=typeof N=="function"?N.apply(C,I):N,lt=l(q.invert(Z).concat(st/q.k),j.invert(Z).concat(st/j.k));return function(tt){if(tt===1)tt=j;else{var ct=lt(tt),_e=st/ct[2];tt=new dt(_e,Z[0]-ct[0]*_e,Z[1]-ct[1]*_e)}D.zoom(null,tt)}})}function A(y,N,w){return!w&&y.__zooming||new z(y,N)}function z(y,N){this.that=y,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(y,N),this.taps=0}z.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,N){return this.mouse&&y!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var N=Y(this.that).datum();u.call(y,this.that,new aa(y,{sourceEvent:this.sourceEvent,target:d,transform:this.that.__zoom,dispatch:u}),N)}};function S(y,...N){if(!t.apply(this,arguments))return;var w=A(this,N).event(y),M=this.__zoom,C=Math.max(o[0],Math.min(o[1],M.k*Math.pow(2,i.apply(this,arguments)))),I=ht(y);if(w.wheel)(w.mouse[0][0]!==I[0]||w.mouse[0][1]!==I[1])&&(w.mouse[1]=M.invert(w.mouse[0]=I)),clearTimeout(w.wheel);else{if(M.k===C)return;w.mouse=[I,M.invert(I)],ae(this),w.start()}Dt(y),w.wheel=setTimeout(D,_),w.zoom("mouse",n(b(x(M,C),w.mouse[0],w.mouse[1]),w.extent,s));function D(){w.wheel=null,w.end()}}function H(y,...N){if(h||!t.apply(this,arguments))return;var w=y.currentTarget,M=A(this,N,!0).event(y),C=Y(y.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",st,!0),I=ht(y,w),D=y.clientX,X=y.clientY;Tn(y.view),Ne(y),M.mouse=[I,this.__zoom.invert(I)],ae(this),M.start();function Z(q){if(Dt(q),!M.moved){var j=q.clientX-D,lt=q.clientY-X;M.moved=j*j+lt*lt>f}M.event(q).zoom("mouse",n(b(M.that.__zoom,M.mouse[0]=ht(q,w),M.mouse[1]),M.extent,s))}function st(q){C.on("mousemove.zoom mouseup.zoom",null),Cn(q.view,M.moved),Dt(q),M.event(q).end()}}function R(y,...N){if(t.apply(this,arguments)){var w=this.__zoom,M=ht(y.changedTouches?y.changedTouches[0]:y,this),C=w.invert(M),I=w.k*(y.shiftKey?.5:2),D=n(b(x(w,I),M,C),e.apply(this,N),s);Dt(y),a>0?Y(this).transition().duration(a).call(k,D,M,y):Y(this).call(d.transform,D,M,y)}}function L(y,...N){if(t.apply(this,arguments)){var w=y.touches,M=w.length,C=A(this,N,y.changedTouches.length===M).event(y),I,D,X,Z;for(Ne(y),D=0;D<M;++D)X=w[D],Z=ht(X,this),Z=[Z,this.__zoom.invert(Z),X.identifier],C.touch0?!C.touch1&&C.touch0[2]!==Z[2]&&(C.touch1=Z,C.taps=0):(C.touch0=Z,I=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),I&&(C.taps<2&&(v=Z[0],c=setTimeout(function(){c=null},g)),ae(this),C.start())}}function F(y,...N){if(this.__zooming){var w=A(this,N).event(y),M=y.changedTouches,C=M.length,I,D,X,Z;for(Dt(y),I=0;I<C;++I)D=M[I],X=ht(D,this),w.touch0&&w.touch0[2]===D.identifier?w.touch0[0]=X:w.touch1&&w.touch1[2]===D.identifier&&(w.touch1[0]=X);if(D=w.that.__zoom,w.touch1){var st=w.touch0[0],q=w.touch0[1],j=w.touch1[0],lt=w.touch1[1],tt=(tt=j[0]-st[0])*tt+(tt=j[1]-st[1])*tt,ct=(ct=lt[0]-q[0])*ct+(ct=lt[1]-q[1])*ct;D=x(D,Math.sqrt(tt/ct)),X=[(st[0]+j[0])/2,(st[1]+j[1])/2],Z=[(q[0]+lt[0])/2,(q[1]+lt[1])/2]}else if(w.touch0)X=w.touch0[0],Z=w.touch0[1];else return;w.zoom("touch",n(b(D,X,Z),w.extent,s))}}function B(y,...N){if(this.__zooming){var w=A(this,N).event(y),M=y.changedTouches,C=M.length,I,D;for(Ne(y),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),I=0;I<C;++I)D=M[I],w.touch0&&w.touch0[2]===D.identifier?delete w.touch0:w.touch1&&w.touch1[2]===D.identifier&&delete w.touch1;if(w.touch1&&!w.touch0&&(w.touch0=w.touch1,delete w.touch1),w.touch0)w.touch0[1]=this.__zoom.invert(w.touch0[0]);else if(w.end(),w.taps===2&&(D=ht(D,this),Math.hypot(v[0]-D[0],v[1]-D[1])<p)){var X=Y(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return d.wheelDelta=function(y){return arguments.length?(i=typeof y=="function"?y:jt(+y),d):i},d.filter=function(y){return arguments.length?(t=typeof y=="function"?y:jt(!!y),d):t},d.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:jt(!!y),d):r},d.extent=function(y){return arguments.length?(e=typeof y=="function"?y:jt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),d):e},d.scaleExtent=function(y){return arguments.length?(o[0]=+y[0],o[1]=+y[1],d):[o[0],o[1]]},d.translateExtent=function(y){return arguments.length?(s[0][0]=+y[0][0],s[1][0]=+y[1][0],s[0][1]=+y[0][1],s[1][1]=+y[1][1],d):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},d.constrain=function(y){return arguments.length?(n=y,d):n},d.duration=function(y){return arguments.length?(a=+y,d):a},d.interpolate=function(y){return arguments.length?(l=y,d):l},d.on=function(){var y=u.on.apply(u,arguments);return y===u?d:y},d.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,d):Math.sqrt(f)},d.tapDistance=function(y){return arguments.length?(p=+y,d):p},d}class da{constructor(e){yt(this,"width",1100);yt(this,"height",800);yt(this,"nodeRadius",{topic:20,document:5});yt(this,"forces",{link:{strength:1},charge:{strength:-100},collision:{radiusScale:1}});e&&Object.assign(this,e)}}class ga{constructor(e){yt(this,"minZoom",.1);yt(this,"maxZoom",4);e&&Object.assign(this,e)}}const pa={width:1100,height:800,nodeRadius:{topic:20,document:5},forces:{link:{strength:1},charge:{strength:-100},collision:{radiusScale:1}}};function ma(t,e,n=pa){return oa(t).force("link",Ws(e).id(i=>i.nodeId).strength(i=>i.weight*n.forces.link.strength)).force("charge",sa().strength(n.forces.charge.strength)).force("center",Cs(n.width/2,n.height/2)).force("collision",Gs().radius(i=>i.type==="topic"?n.nodeRadius.topic*n.forces.collision.radiusScale:n.nodeRadius.document*n.forces.collision.radiusScale))}function hn(t,e,n){const i=t.slice();return i[4]=e[n][0],i[5]=e[n][1],i}function dn(t){let e;function n(o,s){return o[0].type==="topic"?_a:va}let i=n(t),r=i(t);return{c(){e=O("div"),r.c(),this.h()},l(o){e=P(o,"DIV",{class:!0,style:!0});var s=$(e);r.l(s),s.forEach(V),this.h()},h(){T(e,"class","tooltip svelte-164rbb4"),Mt(e,"left",t[1]+10+"px"),Mt(e,"top",t[2]-10+"px")},m(o,s){rt(o,e,s),r.m(e,null)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),s&2&&Mt(e,"left",o[1]+10+"px"),s&4&&Mt(e,"top",o[2]-10+"px")},d(o){o&&V(e),r.d()}}}function va(t){let e,n,i=t[0].title+"",r,o,s,a,l=t[0].date+"",u,c,v,h=t[0].publisher+"",g;return{c(){e=O("div"),n=O("h4"),r=nt(i),o=Q(),s=O("div"),a=nt("Published: "),u=nt(l),c=O("br"),v=nt(`\r
          Source: `),g=nt(h),this.h()},l(_){e=P(_,"DIV",{class:!0});var f=$(e);n=P(f,"H4",{class:!0});var p=$(n);r=et(p,i),p.forEach(V),o=G(f),s=P(f,"DIV",{class:!0});var d=$(s);a=et(d,"Published: "),u=et(d,l),c=P(d,"BR",{}),v=et(d,`\r
          Source: `),g=et(d,h),d.forEach(V),f.forEach(V),this.h()},h(){T(n,"class","svelte-164rbb4"),T(s,"class","tooltip-meta svelte-164rbb4"),T(e,"class","tooltip-document")},m(_,f){rt(_,e,f),E(e,n),E(n,r),E(e,o),E(e,s),E(s,a),E(s,u),E(s,c),E(s,v),E(s,g)},p(_,f){f&1&&i!==(i=_[0].title+"")&&xt(r,i),f&1&&l!==(l=_[0].date+"")&&xt(u,l),f&1&&h!==(h=_[0].publisher+"")&&xt(g,h)},d(_){_&&V(e)}}}function _a(t){let e,n,i=t[0].label+"",r,o,s,a,l=(t[0].prevalence*100).toFixed(1)+"",u,c,v,h,g=Ze(t[0].word_weights),_=[];for(let f=0;f<g.length;f+=1)_[f]=gn(hn(t,g,f));return{c(){e=O("div"),n=O("h4"),r=nt(i),o=Q(),s=O("div"),a=nt("Corpus coverage: "),u=nt(l),c=nt("%"),v=Q(),h=O("div");for(let f=0;f<_.length;f+=1)_[f].c();this.h()},l(f){e=P(f,"DIV",{class:!0});var p=$(e);n=P(p,"H4",{class:!0});var d=$(n);r=et(d,i),d.forEach(V),o=G(p),s=P(p,"DIV",{class:!0});var x=$(s);a=et(x,"Corpus coverage: "),u=et(x,l),c=et(x,"%"),x.forEach(V),v=G(p),h=P(p,"DIV",{class:!0});var b=$(h);for(let m=0;m<_.length;m+=1)_[m].l(b);b.forEach(V),p.forEach(V),this.h()},h(){T(n,"class","svelte-164rbb4"),T(s,"class","tooltip-prevalence svelte-164rbb4"),T(h,"class","tooltip-words svelte-164rbb4"),T(e,"class","tooltip-topic")},m(f,p){rt(f,e,p),E(e,n),E(n,r),E(e,o),E(e,s),E(s,a),E(s,u),E(s,c),E(e,v),E(e,h);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(h,null)},p(f,p){if(p&1&&i!==(i=f[0].label+"")&&xt(r,i),p&1&&l!==(l=(f[0].prevalence*100).toFixed(1)+"")&&xt(u,l),p&1){g=Ze(f[0].word_weights);let d;for(d=0;d<g.length;d+=1){const x=hn(f,g,d);_[d]?_[d].p(x,p):(_[d]=gn(x),_[d].c(),_[d].m(h,null))}for(;d<_.length;d+=1)_[d].d(1);_.length=g.length}},d(f){f&&V(e),Qn(_,f)}}}function gn(t){let e,n=t[4]+"",i;return{c(){e=O("span"),i=nt(n),this.h()},l(r){e=P(r,"SPAN",{class:!0,style:!0});var o=$(e);i=et(o,n),o.forEach(V),this.h()},h(){T(e,"class","tooltip-word svelte-164rbb4"),Mt(e,"opacity",t[5])},m(r,o){rt(r,e,o),E(e,i)},p(r,o){o&1&&n!==(n=r[4]+"")&&xt(i,n),o&1&&Mt(e,"opacity",r[5])},d(r){r&&V(e)}}}function ya(t){let e,n=t[3]&&t[0]&&dn(t);return{c(){n&&n.c(),e=Be()},l(i){n&&n.l(i),e=Be()},m(i,r){n&&n.m(i,r),rt(i,e,r)},p(i,[r]){i[3]&&i[0]?n?n.p(i,r):(n=dn(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:gt,o:gt,d(i){i&&V(e),n&&n.d(i)}}}function wa(t,e,n){let{data:i=null}=e,{x:r=0}=e,{y:o=0}=e,{visible:s=!1}=e;return t.$$set=a=>{"data"in a&&n(0,i=a.data),"x"in a&&n(1,r=a.x),"y"in a&&n(2,o=a.y),"visible"in a&&n(3,s=a.visible)},[i,r,o,s]}class xa extends Zt{constructor(e){super(),Yt(this,e,wa,ya,Bt,{data:0,x:1,y:2,visible:3})}}function ba(t){let e,n,i,r=`Link Threshold:
      <span class="info-icon svelte-8uf7bk" title="Higher values show stronger topic-document relationships only">?</span>`,o,s,a,l,u,c=t[0].toFixed(2)+"",v,h,g,_="Adjust this slider to filter the strength of connections between topics and documents.",f,p,d,x="Zoom In",b,m,k="Zoom Out",A,z,S="Reset",H,R;return{c(){e=O("div"),n=O("div"),i=O("label"),i.innerHTML=r,o=Q(),s=O("input"),l=Q(),u=O("span"),v=nt(c),h=Q(),g=O("div"),g.textContent=_,f=Q(),p=O("div"),d=O("button"),d.textContent=x,b=Q(),m=O("button"),m.textContent=k,A=Q(),z=O("button"),z.textContent=S,this.h()},l(L){e=P(L,"DIV",{class:!0});var F=$(e);n=P(F,"DIV",{class:!0});var B=$(n);i=P(B,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),vt(i)!=="svelte-bi0yz6"&&(i.innerHTML=r),o=G(B),s=P(B,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),l=G(B),u=P(B,"SPAN",{class:!0});var y=$(u);v=et(y,c),y.forEach(V),h=G(B),g=P(B,"DIV",{class:!0,"data-svelte-h":!0}),vt(g)!=="svelte-113iade"&&(g.textContent=_),B.forEach(V),f=G(F),p=P(F,"DIV",{class:!0});var N=$(p);d=P(N,"BUTTON",{class:!0,"data-svelte-h":!0}),vt(d)!=="svelte-1jcq6wv"&&(d.textContent=x),b=G(N),m=P(N,"BUTTON",{class:!0,"data-svelte-h":!0}),vt(m)!=="svelte-39egxt"&&(m.textContent=k),A=G(N),z=P(N,"BUTTON",{class:!0,"data-svelte-h":!0}),vt(z)!=="svelte-n67xm"&&(z.textContent=S),N.forEach(V),F.forEach(V),this.h()},h(){T(i,"for","threshold"),T(i,"class","svelte-8uf7bk"),T(s,"type","range"),T(s,"id","threshold"),T(s,"min","0"),T(s,"max","100"),s.value=a=t[0]*100,T(s,"class","svelte-8uf7bk"),T(u,"class","threshold-value svelte-8uf7bk"),T(g,"class","threshold-explanation svelte-8uf7bk"),T(n,"class","control-group svelte-8uf7bk"),T(d,"class","svelte-8uf7bk"),T(m,"class","svelte-8uf7bk"),T(z,"class","svelte-8uf7bk"),T(p,"class","zoom-controls svelte-8uf7bk"),T(e,"class","controls svelte-8uf7bk")},m(L,F){rt(L,e,F),E(e,n),E(n,i),E(n,o),E(n,s),E(n,l),E(n,u),E(u,v),E(n,h),E(n,g),E(e,f),E(e,p),E(p,d),E(p,b),E(p,m),E(p,A),E(p,z),H||(R=[Kt(s,"input",t[4]),Kt(d,"click",function(){ye(t[1])&&t[1].apply(this,arguments)}),Kt(m,"click",function(){ye(t[2])&&t[2].apply(this,arguments)}),Kt(z,"click",function(){ye(t[3])&&t[3].apply(this,arguments)})],H=!0)},p(L,[F]){t=L,F&1&&a!==(a=t[0]*100)&&(s.value=a),F&1&&c!==(c=t[0].toFixed(2)+"")&&xt(v,c)},i:gt,o:gt,d(L){L&&V(e),H=!1,$n(R)}}}function Na(t,e,n){let{threshold:i}=e,{onThresholdChange:r}=e,{onZoomIn:o}=e,{onZoomOut:s}=e,{onZoomReset:a}=e;function l(u){const c=u.target;r(Number(c.value)/100)}return t.$$set=u=>{"threshold"in u&&n(0,i=u.threshold),"onThresholdChange"in u&&n(5,r=u.onThresholdChange),"onZoomIn"in u&&n(1,o=u.onZoomIn),"onZoomOut"in u&&n(2,s=u.onZoomOut),"onZoomReset"in u&&n(3,a=u.onZoomReset)},[i,o,s,a,l,r]}class ka extends Zt{constructor(e){super(),Yt(this,e,Na,ba,Bt,{threshold:0,onThresholdChange:5,onZoomIn:1,onZoomOut:2,onZoomReset:3})}}function Ma(t,e,n,i,r){const o=Y(t).selectAll(".link").data(n).join("line").attr("class","link").attr("stroke-width",a=>a.weight*2),s=Y(t).selectAll(".node").data(e).join("circle").attr("class",a=>`node node-${a.type}`).attr("r",a=>a.type==="topic"?i.nodeRadius.topic:i.nodeRadius.document);return s.on("mouseover",r.onNodeMouseOver).on("mousemove",r.onNodeMouseMove).on("mouseout",r.onNodeMouseOut),{node:s,link:o}}function Aa(t,e,n){const i=ue().scaleExtent([n.minZoom,n.maxZoom]).on("zoom",r=>{Y(e).attr("transform",r.transform)});return Y(t).call(i),i}function za(t){return qr().on("start",e=>{e.active||t.alphaTarget(.3).restart(),e.subject.fx=e.x,e.subject.fy=e.y}).on("drag",e=>{e.subject.fx=e.x,e.subject.fy=e.y}).on("end",e=>{e.active||t.alphaTarget(0),e.subject.fx=null,e.subject.fy=null})}function Ea(t){let e,n,i,r,o;return{c(){e=O("div"),n=Jn("svg"),this.h()},l(s){e=P(s,"DIV",{class:!0});var a=$(e);n=Wn(a,"svg",{width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0,class:!0}),$(n).forEach(V),a.forEach(V),this.h()},h(){T(n,"width",i=t[1].width),T(n,"height",r=t[1].height),T(n,"viewBox",o="0 0 "+t[1].width+" "+t[1].height),T(n,"preserveAspectRatio","xMidYMid meet"),T(n,"class","svelte-s3jn11"),T(e,"class","svg-container svelte-s3jn11")},m(s,a){rt(s,e,a),E(e,n),t[6](n)},p(s,[a]){a&2&&i!==(i=s[1].width)&&T(n,"width",i),a&2&&r!==(r=s[1].height)&&T(n,"height",r),a&2&&o!==(o="0 0 "+s[1].width+" "+s[1].height)&&T(n,"viewBox",o)},i:gt,o:gt,d(s){s&&V(e),t[6](null)}}}function Ta(t,e,n){let{data:i}=e,{config:r}=e,{zoomConfig:o}=e,{filteredLinks:s}=e,{onNodeHover:a}=e,{svg:l=void 0}=e,u;function c(){if(!l||!i)return;u&&u.stop(),Y(l).selectAll("*").remove();const h=Y(l).append("g");Aa(l,h.node(),o),u=ma(i.nodes,s,r);const{node:g,link:_}=Ma(h.node(),i.nodes,s,r,{onNodeMouseOver:(f,p)=>a(f,p),onNodeMouseMove:f=>a(f,null),onNodeMouseOut:f=>a(f,null)});g.call(za(u)),u.on("tick",()=>{_.attr("x1",f=>f.source.x??0).attr("y1",f=>f.source.y??0).attr("x2",f=>f.target.x??0).attr("y2",f=>f.target.y??0),g.attr("cx",f=>f.x??0).attr("cy",f=>f.y??0)}),u.alphaDecay(.02),u.alphaMin(.001)}pn(()=>{c()}),Un(()=>{c()}),Kn(()=>{u&&u.stop()});function v(h){mn[h?"unshift":"push"](()=>{l=h,n(0,l)})}return t.$$set=h=>{"data"in h&&n(2,i=h.data),"config"in h&&n(1,r=h.config),"zoomConfig"in h&&n(3,o=h.zoomConfig),"filteredLinks"in h&&n(4,s=h.filteredLinks),"onNodeHover"in h&&n(5,a=h.onNodeHover),"svg"in h&&n(0,l=h.svg)},[l,r,i,o,s,a,v]}class Ca extends Zt{constructor(e){super(),Yt(this,e,Ta,Ea,Bt,{data:2,config:1,zoomConfig:3,filteredLinks:4,onNodeHover:5,svg:0})}}function Sa(t){let e,n,i,r,o,s,a,l='<p class="svelte-11oonzv">🟢 Topics: Main themes identified in the corpus</p> <p class="svelte-11oonzv">🔵 Documents: Individual articles</p> <p class="svelte-11oonzv">Lines: Connections between topics and documents (thickness indicates strength)</p>',u,c,v;n=new ka({props:{threshold:t[1],onThresholdChange:t[10],onZoomIn:t[12],onZoomOut:t[13],onZoomReset:t[14]}});function h(_){t[15](_)}let g={data:t[0],config:t[8],zoomConfig:t[9],filteredLinks:t[7],onNodeHover:t[11]};return t[2]!==void 0&&(g.svg=t[2]),r=new Ca({props:g}),mn.push(()=>jn(r,"svg",h)),c=new xa({props:{data:t[3],x:t[4],y:t[5],visible:t[6]}}),{c(){e=O("div"),ie(n.$$.fragment),i=Q(),ie(r.$$.fragment),s=Q(),a=O("div"),a.innerHTML=l,u=Q(),ie(c.$$.fragment),this.h()},l(_){e=P(_,"DIV",{class:!0});var f=$(e);ne(n.$$.fragment,f),i=G(f),ne(r.$$.fragment,f),s=G(f),a=P(f,"DIV",{class:!0,"data-svelte-h":!0}),vt(a)!=="svelte-116t5zx"&&(a.innerHTML=l),u=G(f),ne(c.$$.fragment,f),f.forEach(V),this.h()},h(){T(a,"class","legend svelte-11oonzv"),T(e,"class","visualization-container svelte-11oonzv")},m(_,f){rt(_,e,f),ee(n,e,null),E(e,i),ee(r,e,null),E(e,s),E(e,a),E(e,u),ee(c,e,null),v=!0},p(_,[f]){const p={};f&2&&(p.threshold=_[1]),n.$set(p);const d={};f&1&&(d.data=_[0]),f&128&&(d.filteredLinks=_[7]),!o&&f&4&&(o=!0,d.svg=_[2],Gn(()=>o=!1)),r.$set(d);const x={};f&8&&(x.data=_[3]),f&16&&(x.x=_[4]),f&32&&(x.y=_[5]),f&64&&(x.visible=_[6]),c.$set(x)},i(_){v||(zt(n.$$.fragment,_),zt(r.$$.fragment,_),zt(c.$$.fragment,_),v=!0)},o(_){At(n.$$.fragment,_),At(r.$$.fragment,_),At(c.$$.fragment,_),v=!1},d(_){_&&V(e),te(n),te(r),te(c)}}}function Ia(t,e,n){let i,{data:r}=e,o=.2,s,a=null,l=0,u=0,c=!1;const v=new da({width:1100,height:800}),h=new ga;function g(b){n(1,o=b)}function _(b,m){m?(n(3,a=m),n(4,l=b.pageX),n(5,u=b.pageY),n(6,c=!0)):n(6,c=!1)}function f(){s&&Y(s).transition().duration(750).call(ue().transform,Ht.scale(1.3))}function p(){s&&Y(s).transition().duration(750).call(ue().transform,Ht.scale(1/1.3))}function d(){s&&Y(s).transition().duration(750).call(ue().transform,Ht)}function x(b){s=b,n(2,s)}return t.$$set=b=>{"data"in b&&n(0,r=b.data)},t.$$.update=()=>{t.$$.dirty&3&&n(7,i=r.links.filter(b=>b.weight>o))},[r,o,s,a,l,u,c,i,v,h,g,_,f,p,d,x]}class Da extends Zt{constructor(e){super(),Yt(this,e,Ia,Sa,Bt,{data:0})}}class Fe{constructor(e,n){this.nodes=e,this.links=n}static create(e,n){return new Fe(e,n)}}function Ra(t){const e=[...t.topics.map(i=>({...i,type:"topic",nodeId:`t${i.id}`})),...t.documents.map(i=>({...i,type:"document",nodeId:`d${i.id}`}))],n=[];return t.documents.forEach(i=>{i.topic_weights.forEach((r,o)=>{r>.2&&n.push({source:`t${t.topics[o].id}`,target:`d${i.id}`,weight:r})})}),Fe.create(e,n)}function Va(t){let e,n="Loading visualization...";return{c(){e=O("div"),e.textContent=n,this.h()},l(i){e=P(i,"DIV",{class:!0,"data-svelte-h":!0}),vt(e)!=="svelte-1akd76n"&&(e.textContent=n),this.h()},h(){T(e,"class","loading svelte-1p94koh")},m(i,r){rt(i,e,r)},p:gt,i:gt,o:gt,d(i){i&&V(e)}}}function Ha(t){let e,n;return e=new Da({props:{data:t[0]}}),{c(){ie(e.$$.fragment)},l(i){ne(e.$$.fragment,i)},m(i,r){ee(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.data=i[0]),e.$set(o)},i(i){n||(zt(e.$$.fragment,i),n=!0)},o(i){At(e.$$.fragment,i),n=!1},d(i){te(e,i)}}}function La(t){let e,n,i,r,o,s,a="Topic Model Visualization",l,u,c,v;const h=[Ha,Va],g=[];function _(f,p){return f[0]?0:1}return u=_(t),c=g[u]=h[u](t),{c(){e=O("link"),n=O("link"),i=O("link"),r=Q(),o=O("div"),s=O("h1"),s.textContent=a,l=Q(),c.c(),this.h()},l(f){const p=ei("svelte-b5wgcr",document.head);e=P(p,"LINK",{rel:!0,href:!0}),n=P(p,"LINK",{rel:!0,href:!0,crossorigin:!0}),i=P(p,"LINK",{href:!0,rel:!0}),p.forEach(V),r=G(f),o=P(f,"DIV",{class:!0});var d=$(o);s=P(d,"H1",{class:!0,"data-svelte-h":!0}),vt(s)!=="svelte-134nxqo"&&(s.textContent=a),l=G(d),c.l(d),d.forEach(V),this.h()},h(){document.title="Topic Model Visualization",T(e,"rel","preconnect"),T(e,"href","https://fonts.googleapis.com"),T(n,"rel","preconnect"),T(n,"href","https://fonts.gstatic.com"),T(n,"crossorigin","anonymous"),T(i,"href","https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"),T(i,"rel","stylesheet"),T(s,"class","svelte-1p94koh"),T(o,"class","container svelte-1p94koh")},m(f,p){E(document.head,e),E(document.head,n),E(document.head,i),rt(f,r,p),rt(f,o,p),E(o,s),E(o,l),g[u].m(o,null),v=!0},p(f,[p]){let d=u;u=_(f),u===d?g[u].p(f,p):(ni(),At(g[d],1,1,()=>{g[d]=null}),ti(),c=g[u],c?c.p(f,p):(c=g[u]=h[u](f),c.c()),zt(c,1),c.m(o,null))},i(f){v||(zt(c),v=!0)},o(f){At(c),v=!1},d(f){f&&(V(r),V(o)),V(e),V(n),V(i),g[u].d()}}}function Pa(t,e,n){let i=null;return pn(async()=>{const o=await(await fetch(`${ii}/topic_modeling_results.json`)).json();n(0,i=Ra(o))}),[i]}class Za extends Zt{constructor(e){super(),Yt(this,e,Pa,La,Bt,{})}}export{Za as component};
