var vn=Object.defineProperty;var _n=(t,e,n)=>e in t?vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var P=(t,e,n)=>_n(t,typeof e!="symbol"?e+"":e,n);import{s as Nt,n as W,r as yn,i as Kt,o as Xe,x as mn,e as oe,y as xn}from"../chunks/C0I3Lh4A.js";import{S as kt,i as At,d as N,a as Y,o as ye,x as lt,w as b,c as A,e as R,h as C,y as wn,s as it,b as w,f as $,g as O,t as Z,j as B,z as Mt,A as tt,B as bn,C as Nn,D as kn,q as zt,k as ct,l as ht,u as Rt,v as Dt,r as Lt,n as An,E as Cn,m as En}from"../chunks/BiknXCUn.js";import{b as Mn}from"../chunks/BAebBeR_.js";function me(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}var Sn={value:()=>{}};function se(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Vt(n)}function Vt(t){this._=t}function In(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Vt.prototype=se.prototype={constructor:Vt,on:function(t,e){var n=this._,i=In(t+"",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Tn(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=xe(n[r],t.name,e);else if(e==null)for(r in n)n[r]=xe(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Vt(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Tn(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function xe(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Sn,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Wt="http://www.w3.org/1999/xhtml";const we={svg:"http://www.w3.org/2000/svg",xhtml:Wt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qt(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),we.hasOwnProperty(e)?{space:we[e],local:t}:t}function zn(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Wt&&e.documentElement.namespaceURI===Wt?e.createElement(t):e.createElementNS(n,t)}}function Rn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $e(t){var e=qt(t);return(e.local?Rn:zn)(e)}function Dn(){}function ae(t){return t==null?Dn:function(){return this.querySelector(t)}}function Ln(t){typeof t!="function"&&(t=ae(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=new Array(s),u,l,f=0;f<s;++f)(u=o[f])&&(l=t.call(u,u.__data__,f,o))&&("__data__"in u&&(l.__data__=u.__data__),a[f]=l);return new X(i,this._parents)}function Vn(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Hn(){return[]}function Ze(t){return t==null?Hn:function(){return this.querySelectorAll(t)}}function On(t){return function(){return Vn(t.apply(this,arguments))}}function Bn(t){typeof t=="function"?t=On(t):t=Ze(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&(i.push(t.call(u,u.__data__,l,s)),r.push(u));return new X(i,r)}function qe(t){return function(){return this.matches(t)}}function Ye(t){return function(e){return e.matches(t)}}var Fn=Array.prototype.find;function Pn(t){return function(){return Fn.call(this.children,t)}}function Xn(){return this.firstElementChild}function $n(t){return this.select(t==null?Xn:Pn(typeof t=="function"?t:Ye(t)))}var Zn=Array.prototype.filter;function qn(){return Array.from(this.children)}function Yn(t){return function(){return Zn.call(this.children,t)}}function Un(t){return this.selectAll(t==null?qn:Yn(typeof t=="function"?t:Ye(t)))}function Kn(t){typeof t!="function"&&(t=qe(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new X(i,this._parents)}function Ue(t){return new Array(t.length)}function Gn(){return new X(this._enter||this._groups.map(Ue),this._parents)}function Bt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Bt.prototype={constructor:Bt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Qn(t){return function(){return t}}function Wn(t,e,n,i,r,o){for(var s=0,a,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new Bt(t,o[s]);for(;s<u;++s)(a=e[s])&&(r[s]=a)}function Jn(t,e,n,i,r,o,s){var a,u,l=new Map,f=e.length,p=o.length,d=new Array(f),c;for(a=0;a<f;++a)(u=e[a])&&(d[a]=c=s.call(u,u.__data__,a,e)+"",l.has(c)?r[a]=u:l.set(c,u));for(a=0;a<p;++a)c=s.call(t,o[a],a,o)+"",(u=l.get(c))?(i[a]=u,u.__data__=o[a],l.delete(c)):n[a]=new Bt(t,o[a]);for(a=0;a<f;++a)(u=e[a])&&l.get(d[a])===u&&(r[a]=u)}function jn(t){return t.__data__}function ti(t,e){if(!arguments.length)return Array.from(this,jn);var n=e?Jn:Wn,i=this._parents,r=this._groups;typeof t!="function"&&(t=Qn(t));for(var o=r.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var f=i[l],p=r[l],d=p.length,c=ei(t.call(f,f&&f.__data__,l,i)),_=c.length,h=a[l]=new Array(_),g=s[l]=new Array(_),v=u[l]=new Array(d);n(f,p,h,g,v,c,e);for(var m=0,x=0,y,k;m<_;++m)if(y=h[m]){for(m>=x&&(x=m+1);!(k=g[x])&&++x<_;);y._next=k||null}}return s=new X(s,i),s._enter=a,s._exit=u,s}function ei(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ni(){return new X(this._exit||this._groups.map(Ue),this._parents)}function ii(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function ri(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var l=n[u],f=i[u],p=l.length,d=a[u]=new Array(p),c,_=0;_<p;++_)(c=l[_]||f[_])&&(d[_]=c);for(;u<r;++u)a[u]=n[u];return new X(a,this._parents)}function oi(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function si(t){t||(t=ai);function e(p,d){return p&&d?t(p.__data__,d.__data__):!p-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],a=s.length,u=r[o]=new Array(a),l,f=0;f<a;++f)(l=s[f])&&(u[f]=l);u.sort(e)}return new X(r,this._parents).order()}function ai(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function li(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ui(){return Array.from(this)}function fi(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function ci(){let t=0;for(const e of this)++t;return t}function hi(){return!this.node()}function di(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function gi(t){return function(){this.removeAttribute(t)}}function pi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vi(t,e){return function(){this.setAttribute(t,e)}}function _i(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function mi(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function xi(t,e){var n=qt(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?pi:gi:typeof e=="function"?n.local?mi:yi:n.local?_i:vi)(n,e))}function Ke(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function wi(t){return function(){this.style.removeProperty(t)}}function bi(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Ni(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function ki(t,e,n){return arguments.length>1?this.each((e==null?wi:typeof e=="function"?Ni:bi)(t,e,n??"")):gt(this.node(),t)}function gt(t,e){return t.style.getPropertyValue(e)||Ke(t).getComputedStyle(t,null).getPropertyValue(e)}function Ai(t){return function(){delete this[t]}}function Ci(t,e){return function(){this[t]=e}}function Ei(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Mi(t,e){return arguments.length>1?this.each((e==null?Ai:typeof e=="function"?Ei:Ci)(t,e)):this.node()[t]}function Ge(t){return t.trim().split(/^|\s+/)}function le(t){return t.classList||new Qe(t)}function Qe(t){this._node=t,this._names=Ge(t.getAttribute("class")||"")}Qe.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function We(t,e){for(var n=le(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Je(t,e){for(var n=le(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Si(t){return function(){We(this,t)}}function Ii(t){return function(){Je(this,t)}}function Ti(t,e){return function(){(e.apply(this,arguments)?We:Je)(this,t)}}function zi(t,e){var n=Ge(t+"");if(arguments.length<2){for(var i=le(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Ti:e?Si:Ii)(n,e))}function Ri(){this.textContent=""}function Di(t){return function(){this.textContent=t}}function Li(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Vi(t){return arguments.length?this.each(t==null?Ri:(typeof t=="function"?Li:Di)(t)):this.node().textContent}function Hi(){this.innerHTML=""}function Oi(t){return function(){this.innerHTML=t}}function Bi(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Fi(t){return arguments.length?this.each(t==null?Hi:(typeof t=="function"?Bi:Oi)(t)):this.node().innerHTML}function Pi(){this.nextSibling&&this.parentNode.appendChild(this)}function Xi(){return this.each(Pi)}function $i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zi(){return this.each($i)}function qi(t){var e=typeof t=="function"?t:$e(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Yi(){return null}function Ui(t,e){var n=typeof t=="function"?t:$e(t),i=e==null?Yi:typeof e=="function"?e:ae(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ki(){var t=this.parentNode;t&&t.removeChild(this)}function Gi(){return this.each(Ki)}function Qi(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wi(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ji(t){return this.select(t?Wi:Qi)}function ji(t){return arguments.length?this.property("__data__",t):this.node().__data__}function tr(t){return function(e){t.call(this,e,this.__data__)}}function er(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function nr(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ir(t,e,n){return function(){var i=this.__on,r,o=tr(e);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function rr(t,e,n){var i=er(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,f;u<l;++u)for(r=0,f=a[u];r<o;++r)if((s=i[r]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?ir:nr,r=0;r<o;++r)this.each(a(i[r],e,n));return this}function je(t,e,n){var i=Ke(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function or(t,e){return function(){return je(this,t,e)}}function sr(t,e){return function(){return je(this,t,e.apply(this,arguments))}}function ar(t,e){return this.each((typeof e=="function"?sr:or)(t,e))}function*lr(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var tn=[null];function X(t,e){this._groups=t,this._parents=e}function Ct(){return new X([[document.documentElement]],tn)}function ur(){return this}X.prototype=Ct.prototype={constructor:X,select:Ln,selectAll:Bn,selectChild:$n,selectChildren:Un,filter:Kn,data:ti,enter:Gn,exit:ni,join:ii,merge:ri,selection:ur,order:oi,sort:si,call:li,nodes:ui,node:fi,size:ci,empty:hi,each:di,attr:xi,style:ki,property:Mi,classed:zi,text:Vi,html:Fi,raise:Xi,lower:Zi,append:qi,insert:Ui,remove:Gi,clone:Ji,datum:ji,on:rr,dispatch:ar,[Symbol.iterator]:lr};function ut(t){return typeof t=="string"?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],tn)}function ue(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function en(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Et(){}var mt=.7,Ft=1/mt,dt="\\s*([+-]?\\d+)\\s*",xt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",K="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fr=/^#([0-9a-f]{3,8})$/,cr=new RegExp(`^rgb\\(${dt},${dt},${dt}\\)$`),hr=new RegExp(`^rgb\\(${K},${K},${K}\\)$`),dr=new RegExp(`^rgba\\(${dt},${dt},${dt},${xt}\\)$`),gr=new RegExp(`^rgba\\(${K},${K},${K},${xt}\\)$`),pr=new RegExp(`^hsl\\(${xt},${K},${K}\\)$`),vr=new RegExp(`^hsla\\(${xt},${K},${K},${xt}\\)$`),be={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ue(Et,wt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ne,formatHex:Ne,formatHex8:_r,formatHsl:yr,formatRgb:ke,toString:ke});function Ne(){return this.rgb().formatHex()}function _r(){return this.rgb().formatHex8()}function yr(){return nn(this).formatHsl()}function ke(){return this.rgb().formatRgb()}function wt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=fr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ae(e):n===3?new F(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?St(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?St(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cr.exec(t))?new F(e[1],e[2],e[3],1):(e=hr.exec(t))?new F(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dr.exec(t))?St(e[1],e[2],e[3],e[4]):(e=gr.exec(t))?St(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=pr.exec(t))?Me(e[1],e[2]/100,e[3]/100,1):(e=vr.exec(t))?Me(e[1],e[2]/100,e[3]/100,e[4]):be.hasOwnProperty(t)?Ae(be[t]):t==="transparent"?new F(NaN,NaN,NaN,0):null}function Ae(t){return new F(t>>16&255,t>>8&255,t&255,1)}function St(t,e,n,i){return i<=0&&(t=e=n=NaN),new F(t,e,n,i)}function mr(t){return t instanceof Et||(t=wt(t)),t?(t=t.rgb(),new F(t.r,t.g,t.b,t.opacity)):new F}function Jt(t,e,n,i){return arguments.length===1?mr(t):new F(t,e,n,i??1)}function F(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ue(F,Jt,en(Et,{brighter(t){return t=t==null?Ft:Math.pow(Ft,t),new F(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new F(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new F(rt(this.r),rt(this.g),rt(this.b),Pt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ce,formatHex:Ce,formatHex8:xr,formatRgb:Ee,toString:Ee}));function Ce(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}`}function xr(){return`#${nt(this.r)}${nt(this.g)}${nt(this.b)}${nt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ee(){const t=Pt(this.opacity);return`${t===1?"rgb(":"rgba("}${rt(this.r)}, ${rt(this.g)}, ${rt(this.b)}${t===1?")":`, ${t})`}`}function Pt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function rt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function nt(t){return t=rt(t),(t<16?"0":"")+t.toString(16)}function Me(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new q(t,e,n,i)}function nn(t){if(t instanceof q)return new q(t.h,t.s,t.l,t.opacity);if(t instanceof Et||(t=wt(t)),!t)return new q;if(t instanceof q)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,a=o-r,u=(o+r)/2;return a?(e===o?s=(n-i)/a+(n<i)*6:n===o?s=(i-e)/a+2:s=(e-n)/a+4,a/=u<.5?o+r:2-o-r,s*=60):a=u>0&&u<1?0:s,new q(s,a,u,t.opacity)}function wr(t,e,n,i){return arguments.length===1?nn(t):new q(t,e,n,i??1)}function q(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ue(q,wr,en(Et,{brighter(t){return t=t==null?Ft:Math.pow(Ft,t),new q(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?mt:Math.pow(mt,t),new q(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new F(Gt(t>=240?t-240:t+120,r,i),Gt(t,r,i),Gt(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new q(Se(this.h),It(this.s),It(this.l),Pt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Pt(this.opacity);return`${t===1?"hsl(":"hsla("}${Se(this.h)}, ${It(this.s)*100}%, ${It(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Se(t){return t=(t||0)%360,t<0?t+360:t}function It(t){return Math.max(0,Math.min(1,t||0))}function Gt(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const rn=t=>()=>t;function br(t,e){return function(n){return t+n*e}}function Nr(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function kr(t){return(t=+t)==1?on:function(e,n){return n-e?Nr(e,n,t):rn(isNaN(e)?n:e)}}function on(t,e){var n=e-t;return n?br(t,n):rn(isNaN(t)?e:t)}const Ie=function t(e){var n=kr(e);function i(r,o){var s=n((r=Jt(r)).r,(o=Jt(o)).r),a=n(r.g,o.g),u=n(r.b,o.b),l=on(r.opacity,o.opacity);return function(f){return r.r=s(f),r.g=a(f),r.b=u(f),r.opacity=l(f),r+""}}return i.gamma=t,i}(1);function j(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var jt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qt=new RegExp(jt.source,"g");function Ar(t){return function(){return t}}function Cr(t){return function(e){return t(e)+""}}function Er(t,e){var n=jt.lastIndex=Qt.lastIndex=0,i,r,o,s=-1,a=[],u=[];for(t=t+"",e=e+"";(i=jt.exec(t))&&(r=Qt.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:j(i,r)})),n=Qt.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?Cr(u[0].x):Ar(e):(e=u.length,function(l){for(var f=0,p;f<e;++f)a[(p=u[f]).i]=p.x(l);return a.join("")})}var Te=180/Math.PI,te={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function sn(t,e,n,i,r,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,u/=a),t*i<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Te,skewX:Math.atan(u)*Te,scaleX:s,scaleY:a}}var Tt;function Mr(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?te:sn(e.a,e.b,e.c,e.d,e.e,e.f)}function Sr(t){return t==null||(Tt||(Tt=document.createElementNS("http://www.w3.org/2000/svg","g")),Tt.setAttribute("transform",t),!(t=Tt.transform.baseVal.consolidate()))?te:(t=t.matrix,sn(t.a,t.b,t.c,t.d,t.e,t.f))}function an(t,e,n,i){function r(l){return l.length?l.pop()+" ":""}function o(l,f,p,d,c,_){if(l!==p||f!==d){var h=c.push("translate(",null,e,null,n);_.push({i:h-4,x:j(l,p)},{i:h-2,x:j(f,d)})}else(p||d)&&c.push("translate("+p+e+d+n)}function s(l,f,p,d){l!==f?(l-f>180?f+=360:f-l>180&&(l+=360),d.push({i:p.push(r(p)+"rotate(",null,i)-2,x:j(l,f)})):f&&p.push(r(p)+"rotate("+f+i)}function a(l,f,p,d){l!==f?d.push({i:p.push(r(p)+"skewX(",null,i)-2,x:j(l,f)}):f&&p.push(r(p)+"skewX("+f+i)}function u(l,f,p,d,c,_){if(l!==p||f!==d){var h=c.push(r(c)+"scale(",null,",",null,")");_.push({i:h-4,x:j(l,p)},{i:h-2,x:j(f,d)})}else(p!==1||d!==1)&&c.push(r(c)+"scale("+p+","+d+")")}return function(l,f){var p=[],d=[];return l=t(l),f=t(f),o(l.translateX,l.translateY,f.translateX,f.translateY,p,d),s(l.rotate,f.rotate,p,d),a(l.skewX,f.skewX,p,d),u(l.scaleX,l.scaleY,f.scaleX,f.scaleY,p,d),l=f=null,function(c){for(var _=-1,h=d.length,g;++_<h;)p[(g=d[_]).i]=g.x(c);return p.join("")}}}var Ir=an(Mr,"px, ","px)","deg)"),Tr=an(Sr,", ",")",")"),pt=0,_t=0,vt=0,ln=1e3,Xt,yt,$t=0,st=0,Yt=0,bt=typeof performance=="object"&&performance.now?performance:Date,un=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fe(){return st||(un(zr),st=bt.now()+Yt)}function zr(){st=0}function Zt(){this._call=this._time=this._next=null}Zt.prototype=ce.prototype={constructor:Zt,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?fe():+n)+(e==null?0:+e),!this._next&&yt!==this&&(yt?yt._next=this:Xt=this,yt=this),this._call=t,this._time=n,ee()},stop:function(){this._call&&(this._call=null,this._time=1/0,ee())}};function ce(t,e,n){var i=new Zt;return i.restart(t,e,n),i}function Rr(){fe(),++pt;for(var t=Xt,e;t;)(e=st-t._time)>=0&&t._call.call(void 0,e),t=t._next;--pt}function ze(){st=($t=bt.now())+Yt,pt=_t=0;try{Rr()}finally{pt=0,Lr(),st=0}}function Dr(){var t=bt.now(),e=t-$t;e>ln&&(Yt-=e,$t=t)}function Lr(){for(var t,e=Xt,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xt=n);yt=t,ee(i)}function ee(t){if(!pt){_t&&(_t=clearTimeout(_t));var e=t-st;e>24?(t<1/0&&(_t=setTimeout(ze,t-bt.now()-Yt)),vt&&(vt=clearInterval(vt))):(vt||($t=bt.now(),vt=setInterval(Dr,ln)),pt=1,un(ze))}}function Re(t,e,n){var i=new Zt;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Vr=se("start","end","cancel","interrupt"),Hr=[],fn=0,De=1,ne=2,Ht=3,Le=4,ie=5,Ot=6;function Ut(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Or(t,n,{name:e,index:i,group:r,on:Vr,tween:Hr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:fn})}function he(t,e){var n=U(t,e);if(n.state>fn)throw new Error("too late; already scheduled");return n}function G(t,e){var n=U(t,e);if(n.state>Ht)throw new Error("too late; already running");return n}function U(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Or(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ce(o,0,n.time);function o(l){n.state=De,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var f,p,d,c;if(n.state!==De)return u();for(f in i)if(c=i[f],c.name===n.name){if(c.state===Ht)return Re(s);c.state===Le?(c.state=Ot,c.timer.stop(),c.on.call("interrupt",t,t.__data__,c.index,c.group),delete i[f]):+f<e&&(c.state=Ot,c.timer.stop(),c.on.call("cancel",t,t.__data__,c.index,c.group),delete i[f])}if(Re(function(){n.state===Ht&&(n.state=Le,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=ne,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ne){for(n.state=Ht,r=new Array(d=n.tween.length),f=0,p=-1;f<d;++f)(c=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++p]=c);r.length=p+1}}function a(l){for(var f=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=ie,1),p=-1,d=r.length;++p<d;)r[p].call(t,f);n.state===ie&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Ot,n.timer.stop(),delete i[e];for(var l in i)return;delete t.__transition}}function Br(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>ne&&i.state<ie,i.state=Ot,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function Fr(t){return this.each(function(){Br(this,t)})}function Pr(t,e){var n,i;return function(){var r=G(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function Xr(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=G(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=a;break}u===l&&r.push(a)}o.tween=r}}function $r(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=U(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?Pr:Xr)(n,t,e))}function de(t,e,n){var i=t._id;return t.each(function(){var r=G(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return U(r,i).value[e]}}function cn(t,e){var n;return(typeof e=="number"?j:e instanceof wt?Ie:(n=wt(e))?(e=n,Ie):Er)(t,e)}function Zr(t){return function(){this.removeAttribute(t)}}function qr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yr(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function Ur(t,e,n){var i,r=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function Kr(t,e,n){var i,r,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=a+"",s===u?null:s===i&&u===r?o:(r=u,o=e(i=s,a)))}}function Gr(t,e,n){var i,r,o;return function(){var s,a=n(this),u;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=a+"",s===u?null:s===i&&u===r?o:(r=u,o=e(i=s,a)))}}function Qr(t,e){var n=qt(t),i=n==="transform"?Tr:cn;return this.attrTween(t,typeof e=="function"?(n.local?Gr:Kr)(n,i,de(this,"attr."+t,e)):e==null?(n.local?qr:Zr)(n):(n.local?Ur:Yr)(n,i,e))}function Wr(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Jr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jr(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Jr(t,o)),n}return r._value=e,r}function to(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Wr(t,o)),n}return r._value=e,r}function eo(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=qt(t);return this.tween(n,(i.local?jr:to)(i,e))}function no(t,e){return function(){he(this,t).delay=+e.apply(this,arguments)}}function io(t,e){return e=+e,function(){he(this,t).delay=e}}function ro(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?no:io)(e,t)):U(this.node(),e).delay}function oo(t,e){return function(){G(this,t).duration=+e.apply(this,arguments)}}function so(t,e){return e=+e,function(){G(this,t).duration=e}}function ao(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?oo:so)(e,t)):U(this.node(),e).duration}function lo(t,e){if(typeof e!="function")throw new Error;return function(){G(this,t).ease=e}}function uo(t){var e=this._id;return arguments.length?this.each(lo(e,t)):U(this.node(),e).ease}function fo(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;G(this,t).ease=n}}function co(t){if(typeof t!="function")throw new Error;return this.each(fo(this._id,t))}function ho(t){typeof t!="function"&&(t=qe(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,a=i[r]=[],u,l=0;l<s;++l)(u=o[l])&&t.call(u,u.__data__,l,o)&&a.push(u);return new J(i,this._parents,this._name,this._id)}function go(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var u=e[a],l=n[a],f=u.length,p=s[a]=new Array(f),d,c=0;c<f;++c)(d=u[c]||l[c])&&(p[c]=d);for(;a<i;++a)s[a]=e[a];return new J(s,this._parents,this._name,this._id)}function po(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function vo(t,e,n){var i,r,o=po(e)?he:G;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(e,n),s.on=r}}function _o(t,e){var n=this._id;return arguments.length<2?U(this.node(),n).on.on(t):this.each(vo(n,t,e))}function yo(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function mo(){return this.on("end.remove",yo(this._id))}function xo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ae(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],u=a.length,l=o[s]=new Array(u),f,p,d=0;d<u;++d)(f=a[d])&&(p=t.call(f,f.__data__,d,a))&&("__data__"in f&&(p.__data__=f.__data__),l[d]=p,Ut(l[d],e,n,d,l,U(f,n)));return new J(o,this._parents,e,n)}function wo(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ze(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var u=i[a],l=u.length,f,p=0;p<l;++p)if(f=u[p]){for(var d=t.call(f,f.__data__,p,u),c,_=U(f,n),h=0,g=d.length;h<g;++h)(c=d[h])&&Ut(c,e,n,h,d,_);o.push(d),s.push(f)}return new J(o,s,e,n)}var bo=Ct.prototype.constructor;function No(){return new bo(this._groups,this._parents)}function ko(t,e){var n,i,r;return function(){var o=gt(this,t),s=(this.style.removeProperty(t),gt(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function hn(t){return function(){this.style.removeProperty(t)}}function Ao(t,e,n){var i,r=n+"",o;return function(){var s=gt(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Co(t,e,n){var i,r,o;return function(){var s=gt(this,t),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(t),gt(this,t))),s===u?null:s===i&&u===r?o:(r=u,o=e(i=s,a))}}function Eo(t,e){var n,i,r,o="style."+e,s="end."+o,a;return function(){var u=G(this,t),l=u.on,f=u.value[o]==null?a||(a=hn(e)):void 0;(l!==n||r!==f)&&(i=(n=l).copy()).on(s,r=f),u.on=i}}function Mo(t,e,n){var i=(t+="")=="transform"?Ir:cn;return e==null?this.styleTween(t,ko(t,i)).on("end.style."+t,hn(t)):typeof e=="function"?this.styleTween(t,Co(t,i,de(this,"style."+t,e))).each(Eo(this._id,t)):this.styleTween(t,Ao(t,i,e),n).on("end.style."+t,null)}function So(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Io(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&So(t,s,n)),i}return o._value=e,o}function To(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Io(t,e,n??""))}function zo(t){return function(){this.textContent=t}}function Ro(t){return function(){var e=t(this);this.textContent=e??""}}function Do(t){return this.tween("text",typeof t=="function"?Ro(de(this,"text",t)):zo(t==null?"":t+""))}function Lo(t){return function(e){this.textContent=t.call(this,e)}}function Vo(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Lo(r)),e}return i._value=t,i}function Ho(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Vo(t))}function Oo(){for(var t=this._name,e=this._id,n=dn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,u,l=0;l<a;++l)if(u=s[l]){var f=U(u,e);Ut(u,t,n,l,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new J(i,this._parents,t,n)}function Bo(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){--r===0&&o()}};n.each(function(){var l=G(this,i),f=l.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),l.on=e}),r===0&&o()})}var Fo=0;function J(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function dn(){return++Fo}var Q=Ct.prototype;J.prototype={constructor:J,select:xo,selectAll:wo,selectChild:Q.selectChild,selectChildren:Q.selectChildren,filter:ho,merge:go,selection:No,transition:Oo,call:Q.call,nodes:Q.nodes,node:Q.node,size:Q.size,empty:Q.empty,each:Q.each,on:_o,attr:Qr,attrTween:eo,style:Mo,styleTween:To,text:Do,textTween:Ho,remove:mo,tween:$r,delay:ro,duration:ao,ease:uo,easeVarying:co,end:Bo,[Symbol.iterator]:Q[Symbol.iterator]};function Po(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xo={time:null,delay:0,duration:250,ease:Po};function $o(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Zo(t){var e,n;t instanceof J?(e=t._id,t=t._name):(e=dn(),(n=Xo).time=fe(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,u,l=0;l<a;++l)(u=s[l])&&Ut(u,t,e,l,s,n||$o(u,e));return new J(i,this._parents,t,e)}Ct.prototype.interrupt=Fr;Ct.prototype.transition=Zo;function qo(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var o,s=n.length,a,u=0,l=0;for(o=0;o<s;++o)a=n[o],u+=a.x,l+=a.y;for(u=(u/s-t)*i,l=(l/s-e)*i,o=0;o<s;++o)a=n[o],a.x-=u,a.y-=l}return r.initialize=function(o){n=o},r.x=function(o){return arguments.length?(t=+o,r):t},r.y=function(o){return arguments.length?(e=+o,r):e},r.strength=function(o){return arguments.length?(i=+o,r):i},r}function Yo(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return gn(this.cover(e,n),e,n,t)}function gn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o=t._root,s={data:i},a=t._x0,u=t._y0,l=t._x1,f=t._y1,p,d,c,_,h,g,v,m;if(!o)return t._root=s,t;for(;o.length;)if((h=e>=(p=(a+l)/2))?a=p:l=p,(g=n>=(d=(u+f)/2))?u=d:f=d,r=o,!(o=o[v=g<<1|h]))return r[v]=s,t;if(c=+t._x.call(null,o.data),_=+t._y.call(null,o.data),e===c&&n===_)return s.next=o,r?r[v]=s:t._root=s,t;do r=r?r[v]=new Array(4):t._root=new Array(4),(h=e>=(p=(a+l)/2))?a=p:l=p,(g=n>=(d=(u+f)/2))?u=d:f=d;while((v=g<<1|h)===(m=(_>=d)<<1|c>=p));return r[m]=o,r[v]=s,t}function Uo(t){var e,n,i=t.length,r,o,s=new Array(i),a=new Array(i),u=1/0,l=1/0,f=-1/0,p=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=r,a[n]=o,r<u&&(u=r),r>f&&(f=r),o<l&&(l=o),o>p&&(p=o));if(u>f||l>p)return this;for(this.cover(u,l).cover(f,p),n=0;n<i;++n)gn(this,s[n],a[n],t[n]);return this}function Ko(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,u,l;n>t||t>=r||i>e||e>=o;)switch(l=(e<i)<<1|t<n,u=new Array(4),u[l]=a,a=u,s*=2,l){case 0:r=n+s,o=i+s;break;case 1:n=r-s,o=i+s;break;case 2:r=n+s,i=o-s;break;case 3:n=r-s,i=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}function Go(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Qo(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function V(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Wo(t,e,n){var i,r=this._x0,o=this._y0,s,a,u,l,f=this._x1,p=this._y1,d=[],c=this._root,_,h;for(c&&d.push(new V(c,r,o,f,p)),n==null?n=1/0:(r=t-n,o=e-n,f=t+n,p=e+n,n*=n);_=d.pop();)if(!(!(c=_.node)||(s=_.x0)>f||(a=_.y0)>p||(u=_.x1)<r||(l=_.y1)<o))if(c.length){var g=(s+u)/2,v=(a+l)/2;d.push(new V(c[3],g,v,u,l),new V(c[2],s,v,g,l),new V(c[1],g,a,u,v),new V(c[0],s,a,g,v)),(h=(e>=v)<<1|t>=g)&&(_=d[d.length-1],d[d.length-1]=d[d.length-1-h],d[d.length-1-h]=_)}else{var m=t-+this._x.call(null,c.data),x=e-+this._y.call(null,c.data),y=m*m+x*x;if(y<n){var k=Math.sqrt(n=y);r=t-k,o=e-k,f=t+k,p=e+k,i=c.data}}return i}function Jo(t){if(isNaN(f=+this._x.call(null,t))||isNaN(p=+this._y.call(null,t)))return this;var e,n=this._root,i,r,o,s=this._x0,a=this._y0,u=this._x1,l=this._y1,f,p,d,c,_,h,g,v;if(!n)return this;if(n.length)for(;;){if((_=f>=(d=(s+u)/2))?s=d:u=d,(h=p>=(c=(a+l)/2))?a=c:l=c,e=n,!(n=n[g=h<<1|_]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(i=e,v=g)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,r?(o?r.next=o:delete r.next,this):e?(o?e[g]=o:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[v]=n:this._root=n),this):(this._root=o,this)}function jo(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ts(){return this._root}function es(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ns(t){var e=[],n,i=this._root,r,o,s,a,u;for(i&&e.push(new V(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,o=n.x0,s=n.y0,a=n.x1,u=n.y1)&&i.length){var l=(o+a)/2,f=(s+u)/2;(r=i[3])&&e.push(new V(r,l,f,a,u)),(r=i[2])&&e.push(new V(r,o,f,l,u)),(r=i[1])&&e.push(new V(r,l,s,a,f)),(r=i[0])&&e.push(new V(r,o,s,l,f))}return this}function is(t){var e=[],n=[],i;for(this._root&&e.push(new V(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var o,s=i.x0,a=i.y0,u=i.x1,l=i.y1,f=(s+u)/2,p=(a+l)/2;(o=r[0])&&e.push(new V(o,s,a,f,p)),(o=r[1])&&e.push(new V(o,f,a,u,p)),(o=r[2])&&e.push(new V(o,s,p,f,l)),(o=r[3])&&e.push(new V(o,f,p,u,l))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function rs(t){return t[0]}function os(t){return arguments.length?(this._x=t,this):this._x}function ss(t){return t[1]}function as(t){return arguments.length?(this._y=t,this):this._y}function ge(t,e,n){var i=new pe(e??rs,n??ss,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function pe(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Ve(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var H=ge.prototype=pe.prototype;H.copy=function(){var t=new pe(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Ve(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=Ve(i));return t};H.add=Yo;H.addAll=Uo;H.cover=Ko;H.data=Go;H.extent=Qo;H.find=Wo;H.remove=Jo;H.removeAll=jo;H.root=ts;H.size=es;H.visit=ns;H.visitAfter=is;H.x=os;H.y=as;function ot(t){return function(){return t}}function et(t){return(t()-.5)*1e-6}function ls(t){return t.x+t.vx}function us(t){return t.y+t.vy}function fs(t){var e,n,i,r=1,o=1;typeof t!="function"&&(t=ot(t==null?1:+t));function s(){for(var l,f=e.length,p,d,c,_,h,g,v=0;v<o;++v)for(p=ge(e,ls,us).visitAfter(a),l=0;l<f;++l)d=e[l],h=n[d.index],g=h*h,c=d.x+d.vx,_=d.y+d.vy,p.visit(m);function m(x,y,k,I,E){var M=x.data,L=x.r,S=h+L;if(M){if(M.index>d.index){var D=c-M.x-M.vx,T=_-M.y-M.vy,z=D*D+T*T;z<S*S&&(D===0&&(D=et(i),z+=D*D),T===0&&(T=et(i),z+=T*T),z=(S-(z=Math.sqrt(z)))/z*r,d.vx+=(D*=z)*(S=(L*=L)/(g+L)),d.vy+=(T*=z)*S,M.vx-=D*(S=1-S),M.vy-=T*S)}return}return y>c+S||I<c-S||k>_+S||E<_-S}}function a(l){if(l.data)return l.r=n[l.data.index];for(var f=l.r=0;f<4;++f)l[f]&&l[f].r>l.r&&(l.r=l[f].r)}function u(){if(e){var l,f=e.length,p;for(n=new Array(f),l=0;l<f;++l)p=e[l],n[p.index]=+t(p,l,e)}}return s.initialize=function(l,f){e=l,i=f,u()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(r=+l,s):r},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:ot(+l),u(),s):t},s}function cs(t){return t.index}function He(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function hs(t){var e=cs,n=p,i,r=ot(30),o,s,a,u,l,f=1;t==null&&(t=[]);function p(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var v=0,m=t.length;v<f;++v)for(var x=0,y,k,I,E,M,L,S;x<m;++x)y=t[x],k=y.source,I=y.target,E=I.x+I.vx-k.x-k.vx||et(l),M=I.y+I.vy-k.y-k.vy||et(l),L=Math.sqrt(E*E+M*M),L=(L-o[x])/L*g*i[x],E*=L,M*=L,I.vx-=E*(S=u[x]),I.vy-=M*S,k.vx+=E*(S=1-S),k.vy+=M*S}function c(){if(s){var g,v=s.length,m=t.length,x=new Map(s.map((k,I)=>[e(k,I,s),k])),y;for(g=0,a=new Array(v);g<m;++g)y=t[g],y.index=g,typeof y.source!="object"&&(y.source=He(x,y.source)),typeof y.target!="object"&&(y.target=He(x,y.target)),a[y.source.index]=(a[y.source.index]||0)+1,a[y.target.index]=(a[y.target.index]||0)+1;for(g=0,u=new Array(m);g<m;++g)y=t[g],u[g]=a[y.source.index]/(a[y.source.index]+a[y.target.index]);i=new Array(m),_(),o=new Array(m),h()}}function _(){if(s)for(var g=0,v=t.length;g<v;++g)i[g]=+n(t[g],g,t)}function h(){if(s)for(var g=0,v=t.length;g<v;++g)o[g]=+r(t[g],g,t)}return d.initialize=function(g,v){s=g,l=v,c()},d.links=function(g){return arguments.length?(t=g,c(),d):t},d.id=function(g){return arguments.length?(e=g,d):e},d.iterations=function(g){return arguments.length?(f=+g,d):f},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ot(+g),_(),d):n},d.distance=function(g){return arguments.length?(r=typeof g=="function"?g:ot(+g),h(),d):r},d}const ds=1664525,gs=1013904223,Oe=4294967296;function ps(){let t=1;return()=>(t=(ds*t+gs)%Oe)/Oe}function vs(t){return t.x}function _s(t){return t.y}var ys=10,ms=Math.PI*(3-Math.sqrt(5));function xs(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),o=0,s=.6,a=new Map,u=ce(p),l=se("tick","end"),f=ps();t==null&&(t=[]);function p(){d(),l.call("tick",e),n<i&&(u.stop(),l.call("end",e))}function d(h){var g,v=t.length,m;h===void 0&&(h=1);for(var x=0;x<h;++x)for(n+=(o-n)*r,a.forEach(function(y){y(n)}),g=0;g<v;++g)m=t[g],m.fx==null?m.x+=m.vx*=s:(m.x=m.fx,m.vx=0),m.fy==null?m.y+=m.vy*=s:(m.y=m.fy,m.vy=0);return e}function c(){for(var h=0,g=t.length,v;h<g;++h){if(v=t[h],v.index=h,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var m=ys*Math.sqrt(.5+h),x=h*ms;v.x=m*Math.cos(x),v.y=m*Math.sin(x)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function _(h){return h.initialize&&h.initialize(t,f),h}return c(),e={tick:d,restart:function(){return u.restart(p),e},stop:function(){return u.stop(),e},nodes:function(h){return arguments.length?(t=h,c(),a.forEach(_),e):t},alpha:function(h){return arguments.length?(n=+h,e):n},alphaMin:function(h){return arguments.length?(i=+h,e):i},alphaDecay:function(h){return arguments.length?(r=+h,e):+r},alphaTarget:function(h){return arguments.length?(o=+h,e):o},velocityDecay:function(h){return arguments.length?(s=1-h,e):1-s},randomSource:function(h){return arguments.length?(f=h,a.forEach(_),e):f},force:function(h,g){return arguments.length>1?(g==null?a.delete(h):a.set(h,_(g)),e):a.get(h)},find:function(h,g,v){var m=0,x=t.length,y,k,I,E,M;for(v==null?v=1/0:v*=v,m=0;m<x;++m)E=t[m],y=h-E.x,k=g-E.y,I=y*y+k*k,I<v&&(M=E,v=I);return M},on:function(h,g){return arguments.length>1?(l.on(h,g),e):l.on(h)}}}function ws(){var t,e,n,i,r=ot(-30),o,s=1,a=1/0,u=.81;function l(c){var _,h=t.length,g=ge(t,vs,_s).visitAfter(p);for(i=c,_=0;_<h;++_)e=t[_],g.visit(d)}function f(){if(t){var c,_=t.length,h;for(o=new Array(_),c=0;c<_;++c)h=t[c],o[h.index]=+r(h,c,t)}}function p(c){var _=0,h,g,v=0,m,x,y;if(c.length){for(m=x=y=0;y<4;++y)(h=c[y])&&(g=Math.abs(h.value))&&(_+=h.value,v+=g,m+=g*h.x,x+=g*h.y);c.x=m/v,c.y=x/v}else{h=c,h.x=h.data.x,h.y=h.data.y;do _+=o[h.data.index];while(h=h.next)}c.value=_}function d(c,_,h,g){if(!c.value)return!0;var v=c.x-e.x,m=c.y-e.y,x=g-_,y=v*v+m*m;if(x*x/u<y)return y<a&&(v===0&&(v=et(n),y+=v*v),m===0&&(m=et(n),y+=m*m),y<s&&(y=Math.sqrt(s*y)),e.vx+=v*c.value*i/y,e.vy+=m*c.value*i/y),!0;if(c.length||y>=a)return;(c.data!==e||c.next)&&(v===0&&(v=et(n),y+=v*v),m===0&&(m=et(n),y+=m*m),y<s&&(y=Math.sqrt(s*y)));do c.data!==e&&(x=o[c.data.index]*i/y,e.vx+=v*x,e.vy+=m*x);while(c=c.next)}return l.initialize=function(c,_){t=c,n=_,f()},l.strength=function(c){return arguments.length?(r=typeof c=="function"?c:ot(+c),f(),l):r},l.distanceMin=function(c){return arguments.length?(s=c*c,l):Math.sqrt(s)},l.distanceMax=function(c){return arguments.length?(a=c*c,l):Math.sqrt(a)},l.theta=function(c){return arguments.length?(u=c*c,l):Math.sqrt(u)},l}function ft(t,e,n){this.k=t,this.x=e,this.y=n}ft.prototype={constructor:ft,scale:function(t){return t===1?this:new ft(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ft(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var re=new ft(1,0,0);pn.prototype=ft.prototype;function pn(t){for(;!t.__zoom;)if(!(t=t.parentNode))return re;return t.__zoom}class bs{constructor(e){P(this,"width",1100);P(this,"height",800);P(this,"nodeRadius",{topic:20,document:5});P(this,"forces",{link:{strength:1},charge:{strength:-100},collision:{radiusScale:1}});e&&Object.assign(this,e)}}const Ns={width:1100,height:800,nodeRadius:{topic:20,document:5},forces:{link:{strength:1},charge:{strength:-100},collision:{radiusScale:1}}};function ks(t,e,n=Ns){return xs(t).force("link",hs(e).id(i=>i.nodeId).strength(i=>i.weight*n.forces.link.strength)).force("charge",ws().strength(n.forces.charge.strength)).force("center",qo(n.width/2,n.height/2)).force("collision",fs().radius(i=>i.type==="topic"?n.nodeRadius.topic*n.forces.collision.radiusScale:n.nodeRadius.document*n.forces.collision.radiusScale))}function Be(t,e,n){const i=t.slice();return i[4]=e[n][0],i[5]=e[n][1],i}function Fe(t){let e;function n(o,s){return o[0].type==="topic"?Cs:As}let i=n(t),r=i(t);return{c(){e=C("div"),r.c(),this.h()},l(o){e=A(o,"DIV",{class:!0,style:!0});var s=R(e);r.l(s),s.forEach(N),this.h()},h(){b(e,"class","tooltip svelte-164rbb4"),lt(e,"left",t[1]+10+"px"),lt(e,"top",t[2]-10+"px")},m(o,s){Y(o,e,s),r.m(e,null)},p(o,s){i===(i=n(o))&&r?r.p(o,s):(r.d(1),r=i(o),r&&(r.c(),r.m(e,null))),s&2&&lt(e,"left",o[1]+10+"px"),s&4&&lt(e,"top",o[2]-10+"px")},d(o){o&&N(e),r.d()}}}function As(t){let e,n,i=t[0].title+"",r,o,s,a,u=t[0].date+"",l,f,p,d=t[0].publisher+"",c;return{c(){e=C("div"),n=C("h4"),r=Z(i),o=B(),s=C("div"),a=Z("Published: "),l=Z(u),f=C("br"),p=Z(`\r
          Source: `),c=Z(d),this.h()},l(_){e=A(_,"DIV",{class:!0});var h=R(e);n=A(h,"H4",{class:!0});var g=R(n);r=$(g,i),g.forEach(N),o=O(h),s=A(h,"DIV",{class:!0});var v=R(s);a=$(v,"Published: "),l=$(v,u),f=A(v,"BR",{}),p=$(v,`\r
          Source: `),c=$(v,d),v.forEach(N),h.forEach(N),this.h()},h(){b(n,"class","svelte-164rbb4"),b(s,"class","tooltip-meta svelte-164rbb4"),b(e,"class","tooltip-document")},m(_,h){Y(_,e,h),w(e,n),w(n,r),w(e,o),w(e,s),w(s,a),w(s,l),w(s,f),w(s,p),w(s,c)},p(_,h){h&1&&i!==(i=_[0].title+"")&&it(r,i),h&1&&u!==(u=_[0].date+"")&&it(l,u),h&1&&d!==(d=_[0].publisher+"")&&it(c,d)},d(_){_&&N(e)}}}function Cs(t){let e,n,i=t[0].label+"",r,o,s,a,u=(t[0].prevalence*100).toFixed(1)+"",l,f,p,d,c=me(t[0].word_weights),_=[];for(let h=0;h<c.length;h+=1)_[h]=Pe(Be(t,c,h));return{c(){e=C("div"),n=C("h4"),r=Z(i),o=B(),s=C("div"),a=Z("Corpus coverage: "),l=Z(u),f=Z("%"),p=B(),d=C("div");for(let h=0;h<_.length;h+=1)_[h].c();this.h()},l(h){e=A(h,"DIV",{class:!0});var g=R(e);n=A(g,"H4",{class:!0});var v=R(n);r=$(v,i),v.forEach(N),o=O(g),s=A(g,"DIV",{class:!0});var m=R(s);a=$(m,"Corpus coverage: "),l=$(m,u),f=$(m,"%"),m.forEach(N),p=O(g),d=A(g,"DIV",{class:!0});var x=R(d);for(let y=0;y<_.length;y+=1)_[y].l(x);x.forEach(N),g.forEach(N),this.h()},h(){b(n,"class","svelte-164rbb4"),b(s,"class","tooltip-prevalence svelte-164rbb4"),b(d,"class","tooltip-words svelte-164rbb4"),b(e,"class","tooltip-topic")},m(h,g){Y(h,e,g),w(e,n),w(n,r),w(e,o),w(e,s),w(s,a),w(s,l),w(s,f),w(e,p),w(e,d);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(d,null)},p(h,g){if(g&1&&i!==(i=h[0].label+"")&&it(r,i),g&1&&u!==(u=(h[0].prevalence*100).toFixed(1)+"")&&it(l,u),g&1){c=me(h[0].word_weights);let v;for(v=0;v<c.length;v+=1){const m=Be(h,c,v);_[v]?_[v].p(m,g):(_[v]=Pe(m),_[v].c(),_[v].m(d,null))}for(;v<_.length;v+=1)_[v].d(1);_.length=c.length}},d(h){h&&N(e),wn(_,h)}}}function Pe(t){let e,n=t[4]+"",i;return{c(){e=C("span"),i=Z(n),this.h()},l(r){e=A(r,"SPAN",{class:!0,style:!0});var o=R(e);i=$(o,n),o.forEach(N),this.h()},h(){b(e,"class","tooltip-word svelte-164rbb4"),lt(e,"opacity",t[5])},m(r,o){Y(r,e,o),w(e,i)},p(r,o){o&1&&n!==(n=r[4]+"")&&it(i,n),o&1&&lt(e,"opacity",r[5])},d(r){r&&N(e)}}}function Es(t){let e,n=t[3]&&t[0]&&Fe(t);return{c(){n&&n.c(),e=ye()},l(i){n&&n.l(i),e=ye()},m(i,r){n&&n.m(i,r),Y(i,e,r)},p(i,[r]){i[3]&&i[0]?n?n.p(i,r):(n=Fe(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:W,o:W,d(i){i&&N(e),n&&n.d(i)}}}function Ms(t,e,n){let{data:i=null}=e,{x:r=0}=e,{y:o=0}=e,{visible:s=!1}=e;return t.$$set=a=>{"data"in a&&n(0,i=a.data),"x"in a&&n(1,r=a.x),"y"in a&&n(2,o=a.y),"visible"in a&&n(3,s=a.visible)},[i,r,o,s]}class Ss extends kt{constructor(e){super(),At(this,e,Ms,Es,Nt,{data:0,x:1,y:2,visible:3})}}function Is(t){let e,n,i,r=`Link Threshold:
      <span class="info-icon svelte-8uf7bk" title="Higher values show stronger topic-document relationships only">?</span>`,o,s,a,u,l,f=t[0].toFixed(2)+"",p,d,c,_="Adjust this slider to filter the strength of connections between topics and documents.",h,g,v,m="Zoom In",x,y,k="Zoom Out",I,E,M="Reset",L,S;return{c(){e=C("div"),n=C("div"),i=C("label"),i.innerHTML=r,o=B(),s=C("input"),u=B(),l=C("span"),p=Z(f),d=B(),c=C("div"),c.textContent=_,h=B(),g=C("div"),v=C("button"),v.textContent=m,x=B(),y=C("button"),y.textContent=k,I=B(),E=C("button"),E.textContent=M,this.h()},l(D){e=A(D,"DIV",{class:!0});var T=R(e);n=A(T,"DIV",{class:!0});var z=R(n);i=A(z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),tt(i)!=="svelte-bi0yz6"&&(i.innerHTML=r),o=O(z),s=A(z,"INPUT",{type:!0,id:!0,min:!0,max:!0,class:!0}),u=O(z),l=A(z,"SPAN",{class:!0});var _e=R(l);p=$(_e,f),_e.forEach(N),d=O(z),c=A(z,"DIV",{class:!0,"data-svelte-h":!0}),tt(c)!=="svelte-113iade"&&(c.textContent=_),z.forEach(N),h=O(T),g=A(T,"DIV",{class:!0});var at=R(g);v=A(at,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(v)!=="svelte-1jcq6wv"&&(v.textContent=m),x=O(at),y=A(at,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(y)!=="svelte-39egxt"&&(y.textContent=k),I=O(at),E=A(at,"BUTTON",{class:!0,"data-svelte-h":!0}),tt(E)!=="svelte-n67xm"&&(E.textContent=M),at.forEach(N),T.forEach(N),this.h()},h(){b(i,"for","threshold"),b(i,"class","svelte-8uf7bk"),b(s,"type","range"),b(s,"id","threshold"),b(s,"min","0"),b(s,"max","100"),s.value=a=t[0]*100,b(s,"class","svelte-8uf7bk"),b(l,"class","threshold-value svelte-8uf7bk"),b(c,"class","threshold-explanation svelte-8uf7bk"),b(n,"class","control-group svelte-8uf7bk"),b(v,"class","svelte-8uf7bk"),b(y,"class","svelte-8uf7bk"),b(E,"class","svelte-8uf7bk"),b(g,"class","zoom-controls svelte-8uf7bk"),b(e,"class","controls svelte-8uf7bk")},m(D,T){Y(D,e,T),w(e,n),w(n,i),w(n,o),w(n,s),w(n,u),w(n,l),w(l,p),w(n,d),w(n,c),w(e,h),w(e,g),w(g,v),w(g,x),w(g,y),w(g,I),w(g,E),L||(S=[Mt(s,"input",t[4]),Mt(v,"click",function(){Kt(t[1])&&t[1].apply(this,arguments)}),Mt(y,"click",function(){Kt(t[2])&&t[2].apply(this,arguments)}),Mt(E,"click",function(){Kt(t[3])&&t[3].apply(this,arguments)})],L=!0)},p(D,[T]){t=D,T&1&&a!==(a=t[0]*100)&&(s.value=a),T&1&&f!==(f=t[0].toFixed(2)+"")&&it(p,f)},i:W,o:W,d(D){D&&N(e),L=!1,yn(S)}}}function Ts(t,e,n){let{threshold:i}=e,{onThresholdChange:r}=e,{onZoomIn:o}=e,{onZoomOut:s}=e,{onZoomReset:a}=e;function u(l){const f=l.target;r(Number(f.value)/100)}return t.$$set=l=>{"threshold"in l&&n(0,i=l.threshold),"onThresholdChange"in l&&n(5,r=l.onThresholdChange),"onZoomIn"in l&&n(1,o=l.onZoomIn),"onZoomOut"in l&&n(2,s=l.onZoomOut),"onZoomReset"in l&&n(3,a=l.onZoomReset)},[i,o,s,a,u,r]}class zs extends kt{constructor(e){super(),At(this,e,Ts,Is,Nt,{threshold:0,onThresholdChange:5,onZoomIn:1,onZoomOut:2,onZoomReset:3})}}function Rs(t,e,n,i,r){const o=ut(t).selectAll(".link").data(n).join("line").attr("class","link").attr("stroke-width",a=>a.weight*2),s=ut(t).selectAll(".node").data(e).join("circle").attr("class",a=>`node node-${a.type}`).attr("r",a=>a.type==="topic"?i.nodeRadius.topic:i.nodeRadius.document);return s.on("mouseover",r.onNodeMouseOver).on("mousemove",r.onNodeMouseMove).on("mouseout",r.onNodeMouseOut),{node:s,link:o}}class Ds{constructor(e,n,i,r,o){P(this,"svg");P(this,"container");P(this,"simulation");P(this,"config");P(this,"nodes");P(this,"links");P(this,"nodeSelection");P(this,"linkSelection");this.svg=e,this.config=r,this.nodes=n,this.links=i;const s=ut(e).append("g");this.container=s.node(),this.simulation=ks(this.nodes,this.links,this.config);const a=Rs(this.container,this.nodes,this.links,this.config,{onNodeMouseOver:(u,l,...f)=>o(u,l,...f),onNodeMouseMove:(u,l,...f)=>o(u,l,...f),onNodeMouseOut:(u,l,...f)=>o(u,null,...f)});this.nodeSelection=a.node,this.linkSelection=a.link,this.simulation.on("tick",()=>{this.linkSelection.attr("x1",u=>u.source.x??0).attr("y1",u=>u.source.y??0).attr("x2",u=>u.target.x??0).attr("y2",u=>u.target.y??0),this.nodeSelection.attr("cx",u=>u.x??0).attr("cy",u=>u.y??0)})}updateLinks(e){this.links=e;const n=this.simulation.force("link");n&&n.links(e),this.linkSelection=this.linkSelection.data(e,(r,o,s)=>`${r.source.nodeId}-${r.target.nodeId}`),this.linkSelection.exit().remove();const i=this.linkSelection.enter().append("line").attr("class","link");this.linkSelection=i.merge(this.linkSelection),this.simulation.alpha(1).restart()}zoomBy(e){const n=pn(this.svg),i=re.translate(n.x,n.y).scale(n.k*e);ut(this.svg).transition().duration(750).call(this.getZoomBehavior().transform,i)}zoomReset(){ut(this.svg).transition().duration(750).call(this.getZoomBehavior().transform,re)}getZoomBehavior(){return ut(this.svg).on("zoom")}destroy(){this.simulation.stop()}}function Ls(t){let e,n,i,r,o;return{c(){e=C("div"),n=Nn("svg"),this.h()},l(s){e=A(s,"DIV",{class:!0});var a=R(e);n=bn(a,"svg",{width:!0,height:!0,viewBox:!0,preserveAspectRatio:!0,class:!0}),R(n).forEach(N),a.forEach(N),this.h()},h(){b(n,"width",i=t[1].width),b(n,"height",r=t[1].height),b(n,"viewBox",o="0 0 "+t[1].width+" "+t[1].height),b(n,"preserveAspectRatio","xMidYMid meet"),b(n,"class","svelte-s3jn11"),b(e,"class","svg-container svelte-s3jn11")},m(s,a){Y(s,e,a),w(e,n),t[9](n)},p(s,[a]){a&2&&i!==(i=s[1].width)&&b(n,"width",i),a&2&&r!==(r=s[1].height)&&b(n,"height",r),a&2&&o!==(o="0 0 "+s[1].width+" "+s[1].height)&&b(n,"viewBox",o)},i:W,o:W,d(s){s&&N(e),t[9](null)}}}function Vs(t,e,n){let{data:i}=e,{config:r}=e,{filteredLinks:o}=e,{onNodeHover:s}=e,{svg:a=void 0}=e,u;Xe(()=>{a&&n(8,u=new Ds(a,i.nodes,o,r,s))});function l(c){u&&u.zoomBy(c)}function f(){u&&u.zoomReset()}function p(c){u&&u.updateLinks(c)}mn(()=>{u&&u.destroy()});function d(c){oe[c?"unshift":"push"](()=>{a=c,n(0,a)})}return t.$$set=c=>{"data"in c&&n(2,i=c.data),"config"in c&&n(1,r=c.config),"filteredLinks"in c&&n(3,o=c.filteredLinks),"onNodeHover"in c&&n(4,s=c.onNodeHover),"svg"in c&&n(0,a=c.svg)},t.$$.update=()=>{t.$$.dirty&264&&u&&o&&p(o)},[a,r,i,o,s,l,f,p,u,d]}class Hs extends kt{constructor(e){super(),At(this,e,Vs,Ls,Nt,{data:2,config:1,filteredLinks:3,onNodeHover:4,svg:0,zoomBy:5,zoomReset:6,updateLinks:7})}get zoomBy(){return this.$$.ctx[5]}get zoomReset(){return this.$$.ctx[6]}get updateLinks(){return this.$$.ctx[7]}}function Os(t){let e,n,i,r,o,s,a,u='<p class="svelte-11oonzv"> Topics: Main themes identified in the corpus</p> <p class="svelte-11oonzv"> Documents: Individual articles</p> <p class="svelte-11oonzv">Lines: Connections between topics and documents (thickness indicates strength)</p>',l,f,p;n=new zs({props:{threshold:t[1],onThresholdChange:t[10],onZoomIn:t[12],onZoomOut:t[13],onZoomReset:t[14]}});function d(_){t[16](_)}let c={data:t[0],config:t[9],filteredLinks:t[3],onNodeHover:t[11]};return t[4]!==void 0&&(c.svg=t[4]),r=new Hs({props:c}),t[15](r),oe.push(()=>kn(r,"svg",d)),f=new Ss({props:{data:t[5],x:t[6],y:t[7],visible:t[8]}}),{c(){e=C("div"),Lt(n.$$.fragment),i=B(),Lt(r.$$.fragment),s=B(),a=C("div"),a.innerHTML=u,l=B(),Lt(f.$$.fragment),this.h()},l(_){e=A(_,"DIV",{class:!0});var h=R(e);Dt(n.$$.fragment,h),i=O(h),Dt(r.$$.fragment,h),s=O(h),a=A(h,"DIV",{class:!0,"data-svelte-h":!0}),tt(a)!=="svelte-116t5zx"&&(a.innerHTML=u),l=O(h),Dt(f.$$.fragment,h),h.forEach(N),this.h()},h(){b(a,"class","legend svelte-11oonzv"),b(e,"class","visualization-container svelte-11oonzv")},m(_,h){Y(_,e,h),Rt(n,e,null),w(e,i),Rt(r,e,null),w(e,s),w(e,a),w(e,l),Rt(f,e,null),p=!0},p(_,[h]){const g={};h&2&&(g.threshold=_[1]),n.$set(g);const v={};h&1&&(v.data=_[0]),h&8&&(v.filteredLinks=_[3]),!o&&h&16&&(o=!0,v.svg=_[4],xn(()=>o=!1)),r.$set(v);const m={};h&32&&(m.data=_[5]),h&64&&(m.x=_[6]),h&128&&(m.y=_[7]),h&256&&(m.visible=_[8]),f.$set(m)},i(_){p||(ht(n.$$.fragment,_),ht(r.$$.fragment,_),ht(f.$$.fragment,_),p=!0)},o(_){ct(n.$$.fragment,_),ct(r.$$.fragment,_),ct(f.$$.fragment,_),p=!1},d(_){_&&N(e),zt(n),t[15](null),zt(r),zt(f)}}}function Bs(t,e,n){let i,{data:r}=e,o=.2,s,a=null,u=0,l=0,f=!1;const p=new bs({width:1100,height:800});let d;function c(y){n(1,o=y)}function _(y,k){k?(n(5,a=k),n(6,u=y.pageX),n(7,l=y.pageY),n(8,f=!0)):n(8,f=!1)}function h(){d&&d.zoomBy(1.3)}function g(){d&&d.zoomBy(1/1.3)}function v(){d&&d.zoomReset()}function m(y){oe[y?"unshift":"push"](()=>{d=y,n(2,d)})}function x(y){s=y,n(4,s)}return t.$$set=y=>{"data"in y&&n(0,r=y.data)},t.$$.update=()=>{t.$$.dirty&3&&n(3,i=r.links.filter(y=>y.weight>o)),t.$$.dirty&12&&d&&i&&d.updateLinks(i)},[r,o,d,i,s,a,u,l,f,p,c,_,h,g,v,m,x]}class Fs extends kt{constructor(e){super(),At(this,e,Bs,Os,Nt,{data:0})}}class ve{constructor(e,n){this.nodes=e,this.links=n}static create(e,n){return new ve(e,n)}}function Ps(t){const e=[...t.topics.map(i=>({...i,type:"topic",nodeId:`t${i.id}`})),...t.documents.map(i=>({...i,type:"document",nodeId:`d${i.id}`}))],n=[];return t.documents.forEach(i=>{i.topic_weights.forEach((r,o)=>{r>.2&&n.push({source:`t${t.topics[o].id}`,target:`d${i.id}`,weight:r})})}),ve.create(e,n)}function Xs(t){let e,n="Loading visualization...";return{c(){e=C("div"),e.textContent=n,this.h()},l(i){e=A(i,"DIV",{class:!0,"data-svelte-h":!0}),tt(e)!=="svelte-1akd76n"&&(e.textContent=n),this.h()},h(){b(e,"class","loading svelte-1p94koh")},m(i,r){Y(i,e,r)},p:W,i:W,o:W,d(i){i&&N(e)}}}function $s(t){let e,n;return e=new Fs({props:{data:t[0]}}),{c(){Lt(e.$$.fragment)},l(i){Dt(e.$$.fragment,i)},m(i,r){Rt(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.data=i[0]),e.$set(o)},i(i){n||(ht(e.$$.fragment,i),n=!0)},o(i){ct(e.$$.fragment,i),n=!1},d(i){zt(e,i)}}}function Zs(t){let e,n,i,r,o,s,a="Topic Model Visualization",u,l,f,p;const d=[$s,Xs],c=[];function _(h,g){return h[0]?0:1}return l=_(t),f=c[l]=d[l](t),{c(){e=C("link"),n=C("link"),i=C("link"),r=B(),o=C("div"),s=C("h1"),s.textContent=a,u=B(),f.c(),this.h()},l(h){const g=Cn("svelte-b5wgcr",document.head);e=A(g,"LINK",{rel:!0,href:!0}),n=A(g,"LINK",{rel:!0,href:!0,crossorigin:!0}),i=A(g,"LINK",{href:!0,rel:!0}),g.forEach(N),r=O(h),o=A(h,"DIV",{class:!0});var v=R(o);s=A(v,"H1",{class:!0,"data-svelte-h":!0}),tt(s)!=="svelte-134nxqo"&&(s.textContent=a),u=O(v),f.l(v),v.forEach(N),this.h()},h(){document.title="Topic Model Visualization",b(e,"rel","preconnect"),b(e,"href","https://fonts.googleapis.com"),b(n,"rel","preconnect"),b(n,"href","https://fonts.gstatic.com"),b(n,"crossorigin","anonymous"),b(i,"href","https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap"),b(i,"rel","stylesheet"),b(s,"class","svelte-1p94koh"),b(o,"class","container svelte-1p94koh")},m(h,g){w(document.head,e),w(document.head,n),w(document.head,i),Y(h,r,g),Y(h,o,g),w(o,s),w(o,u),c[l].m(o,null),p=!0},p(h,[g]){let v=l;l=_(h),l===v?c[l].p(h,g):(En(),ct(c[v],1,1,()=>{c[v]=null}),An(),f=c[l],f?f.p(h,g):(f=c[l]=d[l](h),f.c()),ht(f,1),f.m(o,null))},i(h){p||(ht(f),p=!0)},o(h){ct(f),p=!1},d(h){h&&(N(r),N(o)),N(e),N(n),N(i),c[l].d()}}}function qs(t,e,n){let i=null;return Xe(async()=>{const o=await(await fetch(`${Mn}/topic_modeling_results.json`)).json();n(0,i=Ps(o))}),[i]}class Qs extends kt{constructor(e){super(),At(this,e,qs,Zs,Nt,{})}}export{Qs as component};
